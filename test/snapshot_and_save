fetch("https://memus.pro/api/articles/f433285f-3d09-4809-8d9f-62cdbebc34e0/structure/snapshot", {
  "headers": {
    "accept": "*/*",
    "accept-language": "en,ru;q=0.9,en-US;q=0.8",
    "content-type": "application/json",
    "priority": "u=1, i",
    "sec-ch-ua": "\"Google Chrome\";v=\"143\", \"Chromium\";v=\"143\", \"Not A(Brand\";v=\"24\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"Windows\"",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin"
  },
  "referrer": "https://memus.pro/article/f433285f-3d09-4809-8d9f-62cdbebc34e0",
  "body": "{\"opId\":\"ca87a19b-73f7-4e2f-9ea9-6b22b7de5a22\",\"nodes\":[{\"sectionId\":\"321e838f-3a3e-4904-82cb-877324b2cf9f\",\"parentId\":null,\"position\":0,\"collapsed\":false},{\"sectionId\":\"a9224d63-342b-451c-aaf8-a43824e808c4\",\"parentId\":\"321e838f-3a3e-4904-82cb-877324b2cf9f\",\"position\":0,\"collapsed\":true},{\"sectionId\":\"60eaff95-2c6b-4519-a7e8-1127a2df1b43\",\"parentId\":\"321e838f-3a3e-4904-82cb-877324b2cf9f\",\"position\":1,\"collapsed\":true},{\"sectionId\":\"f810a9b6-0900-477f-ae9a-fd4031012e99\",\"parentId\":\"321e838f-3a3e-4904-82cb-877324b2cf9f\",\"position\":2,\"collapsed\":true},{\"sectionId\":\"5c9f5ad4-96c0-4866-b753-f48cc8ef22de\",\"parentId\":null,\"position\":1,\"collapsed\":true},{\"sectionId\":\"020c7f3f-924a-4e0e-8512-ef928b022b18\",\"parentId\":null,\"position\":2,\"collapsed\":true},{\"sectionId\":\"5642ff56-abb2-46e0-93f6-75eb44e758ad\",\"parentId\":null,\"position\":3,\"collapsed\":false},{\"sectionId\":\"70feec3b-57b3-4ae7-915d-b85ed372ba15\",\"parentId\":\"5642ff56-abb2-46e0-93f6-75eb44e758ad\",\"position\":0,\"collapsed\":false},{\"sectionId\":\"5ef4d54a-7606-41fb-9236-f4b3cdd82818\",\"parentId\":\"70feec3b-57b3-4ae7-915d-b85ed372ba15\",\"position\":0,\"collapsed\":false},{\"sectionId\":\"7009623f-7622-4220-b20e-ba0feab777ad\",\"parentId\":\"70feec3b-57b3-4ae7-915d-b85ed372ba15\",\"position\":1,\"collapsed\":true},{\"sectionId\":\"f1980433-4f0a-4122-9418-586b44da6a55\",\"parentId\":\"70feec3b-57b3-4ae7-915d-b85ed372ba15\",\"position\":2,\"collapsed\":true},{\"sectionId\":\"3a6df3cb-d7a7-476e-84e6-f337dec8cb98\",\"parentId\":\"70feec3b-57b3-4ae7-915d-b85ed372ba15\",\"position\":3,\"collapsed\":true},{\"sectionId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"parentId\":\"5642ff56-abb2-46e0-93f6-75eb44e758ad\",\"position\":1,\"collapsed\":true},{\"sectionId\":\"61963866-d5c3-4ece-8124-9e3d6db8ef0e\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":0,\"collapsed\":true},{\"sectionId\":\"0de19835-6c48-4d0c-82c2-7b6ebc7e3771\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":1,\"collapsed\":true},{\"sectionId\":\"48bdbe59-ca47-40b2-81a9-54c8ba7b2531\",\"parentId\":\"0de19835-6c48-4d0c-82c2-7b6ebc7e3771\",\"position\":0,\"collapsed\":true},{\"sectionId\":\"02be1d36-ab25-46a3-bf24-c77d86bcc597\",\"parentId\":\"0de19835-6c48-4d0c-82c2-7b6ebc7e3771\",\"position\":1,\"collapsed\":true},{\"sectionId\":\"320702fe-879a-4001-965d-bc3ede6fc621\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":2,\"collapsed\":true},{\"sectionId\":\"da72b78f-a8b0-4cd6-8656-7d1057111eb4\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":3,\"collapsed\":true},{\"sectionId\":\"ab74af98-55bc-4fb7-abec-753c3b185fdf\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":4,\"collapsed\":true},{\"sectionId\":\"a6131a9e-3871-4fb9-8a5b-d67d981fc96c\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":5,\"collapsed\":true},{\"sectionId\":\"c2ef6ac7-7a9b-430f-9350-7dbdca0f9d8e\",\"parentId\":\"a6131a9e-3871-4fb9-8a5b-d67d981fc96c\",\"position\":0,\"collapsed\":true},{\"sectionId\":\"85347f62-9dd1-4281-83bd-1563b1abb20f\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":6,\"collapsed\":true},{\"sectionId\":\"796b4ce2-53ba-4ca9-9b4b-bc4ad204fe44\",\"parentId\":\"85347f62-9dd1-4281-83bd-1563b1abb20f\",\"position\":0,\"collapsed\":true},{\"sectionId\":\"d3b995f8-a307-4be2-8a6a-4da9cd73229a\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":7,\"collapsed\":true},{\"sectionId\":\"3f831749-8975-421d-86eb-8581fbf5a157\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":8,\"collapsed\":true},{\"sectionId\":\"3e7224fb-4a23-4612-88b7-06cba48ca40e\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":9,\"collapsed\":true},{\"sectionId\":\"6ce80423-3cd3-4fc9-a0b7-fd940e171634\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":10,\"collapsed\":true},{\"sectionId\":\"e71d233c-7959-4d67-bd6d-335ab2ea2c77\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":11,\"collapsed\":true},{\"sectionId\":\"c080d473-0811-4fb5-8ce8-46f9e0b6d4a1\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":12,\"collapsed\":true},{\"sectionId\":\"661579f9-550e-46e3-9545-310f98cea5de\",\"parentId\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"position\":13,\"collapsed\":true},{\"sectionId\":\"07c016fe-2e6b-484d-817c-4e4421a01749\",\"parentId\":null,\"position\":4,\"collapsed\":true},{\"sectionId\":\"20df486d-f5a8-40c8-a2a0-3aacd6e8ff0e\",\"parentId\":\"07c016fe-2e6b-484d-817c-4e4421a01749\",\"position\":0,\"collapsed\":true},{\"sectionId\":\"ea74328e-2f0b-4351-8e1a-acfc3725ffdd\",\"parentId\":null,\"position\":5,\"collapsed\":true},{\"sectionId\":\"c333e77b-de21-46e6-bc43-cdbf0e62c00d\",\"parentId\":\"ea74328e-2f0b-4351-8e1a-acfc3725ffdd\",\"position\":0,\"collapsed\":false},{\"sectionId\":\"e9513c9a-c33f-44cb-8ad7-b36f23460d81\",\"parentId\":\"ea74328e-2f0b-4351-8e1a-acfc3725ffdd\",\"position\":1,\"collapsed\":false},{\"sectionId\":\"6861c2bf-04ec-48f0-8127-6c8550914646\",\"parentId\":null,\"position\":6,\"collapsed\":true},{\"sectionId\":\"43e02a18-6bda-433d-a6d4-24e9ed16b368\",\"parentId\":null,\"position\":7,\"collapsed\":true},{\"sectionId\":\"23fb92a7-f682-47e4-8154-9db7ac3c0fdd\",\"parentId\":null,\"position\":8,\"collapsed\":true},{\"sectionId\":\"0d7c0c0e-a25d-4dd2-89d8-2a2d72194c78\",\"parentId\":null,\"position\":9,\"collapsed\":true},{\"sectionId\":\"4a8f825b-f972-40c0-b32c-b1c269dac8bb\",\"parentId\":null,\"position\":10,\"collapsed\":false},{\"sectionId\":\"01608e0c-b23c-4926-b8ea-f0783c3f8481\",\"parentId\":null,\"position\":11,\"collapsed\":false},{\"sectionId\":\"9bc2c134-59a0-4c08-954d-2590efa474e5\",\"parentId\":null,\"position\":12,\"collapsed\":false},{\"sectionId\":\"bd1764bb-3e46-4ee5-8592-9aa7122188a0\",\"parentId\":null,\"position\":13,\"collapsed\":false},{\"sectionId\":\"d44eb3c4-6534-4a68-8109-5a20192410f0\",\"parentId\":null,\"position\":14,\"collapsed\":false},{\"sectionId\":\"70f95924-4767-4533-aae9-3e5a7f6765e3\",\"parentId\":null,\"position\":15,\"collapsed\":false},{\"sectionId\":\"59fd6553-6446-4c79-9de0-1c9f0fcc5d00\",\"parentId\":null,\"position\":16,\"collapsed\":false},{\"sectionId\":\"da84ff69-212b-42c9-a0fe-978623acb5cb\",\"parentId\":null,\"position\":17,\"collapsed\":false},{\"sectionId\":\"4627fa18-bf1c-4a0e-8650-ffdcc604873f\",\"parentId\":null,\"position\":18,\"collapsed\":false},{\"sectionId\":\"b009e2e3-c0c7-41ef-8cb9-b6575cd80908\",\"parentId\":null,\"position\":19,\"collapsed\":false},{\"sectionId\":\"71058c07-09be-493d-b935-9642735d17e3\",\"parentId\":null,\"position\":20,\"collapsed\":false},{\"sectionId\":\"293650ad-6e9d-4eb5-b5f7-a28ec8b603e5\",\"parentId\":null,\"position\":21,\"collapsed\":false},{\"sectionId\":\"3cff1e4c-c839-4124-b7f4-8947a7f5a7b6\",\"parentId\":null,\"position\":22,\"collapsed\":false},{\"sectionId\":\"d2764a86-2528-4b9f-9069-b5608382fbc7\",\"parentId\":null,\"position\":23,\"collapsed\":false},{\"sectionId\":\"5e4288a0-c00a-42c4-ab82-3d4bb198bfea\",\"parentId\":null,\"position\":24,\"collapsed\":false},{\"sectionId\":\"c0c25807-537e-4b07-8901-e8cf693684df\",\"parentId\":null,\"position\":25,\"collapsed\":true}]}",
  "method": "PUT",
  "mode": "cors",
  "credentials": "include"
}); ;
fetch("https://memus.pro/api/articles/f433285f-3d09-4809-8d9f-62cdbebc34e0/doc-json/save", {
  "headers": {
    "accept": "*/*",
    "accept-language": "en,ru;q=0.9,en-US;q=0.8",
    "content-type": "application/json",
    "priority": "u=1, i",
    "sec-ch-ua": "\"Google Chrome\";v=\"143\", \"Chromium\";v=\"143\", \"Not A(Brand\";v=\"24\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"Windows\"",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin"
  },
  "referrer": "https://memus.pro/article/f433285f-3d09-4809-8d9f-62cdbebc34e0",
  "body": "{\"docJson\":{\"type\":\"doc\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"321e838f-3a3e-4904-82cb-877324b2cf9f\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Философия\"}]},{\"type\":\"outlineBody\"},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"a9224d63-342b-451c-aaf8-a43824e808c4\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Блок\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Мы мыслим мыслями. Каждая мысль - это законченная единица информации. В языке это обычно абзац текста. В Memus это \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"блок\"},{\"type\":\"text\",\"text\":\". Блоки можно двигать и структурировать. Также как мысли можно структурировать - какая мысль общая, а какая частная, какая основная, какая поясняющая или расшифровывающая.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"60eaff95-2c6b-4519-a7e8-1127a2df1b43\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Статья\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Статья - это структура мыслей, поясняющая определённый аспект. Предполагается, что в статье содержатся те и только те мысли (блоки), которые нужны для описания этого аспекта. Ничего лишнего в статье быть не должно.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"f810a9b6-0900-477f-ae9a-fd4031012e99\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Структура статей\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Объёмное описание предмета пожет содержать много статей, описывающих разные его аспекты. Делать одну огромную статью на весь объект не надо. Значит нужна какая-то структура статей в каком-то отдельном виде.\"}]}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"5c9f5ad4-96c0-4866-b753-f48cc8ef22de\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Memus - Возможности\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Автоматически исправляет ошибки правописания и грамматики - для этого вообще ничего не нужно делать.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Сам придумывает заголовки блокам - просто введите текст, а Memus придумает заголовок\"}]}]}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"020c7f3f-924a-4e0e-8512-ef928b022b18\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Memus - Руководство пользователя\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"/article/3da957d7-74a9-41b8-8368-782274ad1973\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"Memus - Руководство пользователя\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"5642ff56-abb2-46e0-93f6-75eb44e758ad\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Доработки\"}]},{\"type\":\"outlineBody\"},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"70feec3b-57b3-4ae7-915d-b85ed372ba15\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"TODO\"}]},{\"type\":\"outlineBody\"},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"5ef4d54a-7606-41fb-9236-f4b3cdd82818\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\"},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"7009623f-7622-4220-b20e-ba0feab777ad\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Изменения в меню: стрелочки убраны, выпадашки не работают.\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"в\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"outlineToolbar\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Мы убрали стрелочки для выпадашек - теперь они вообще не выпадают. Повесь на кнопки меню.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"f1980433-4f0a-4122-9418-586b44da6a55\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"- Backup базы\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Отлично, этого достаточно, чтобы собрать конкретный конфиг.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"1. /etc/default/memus-pg-backup\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Создай/открой файл:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"sudo nano /etc/default/memus-pg-backup\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"И положи туда (без кавычек, свои секреты подставь):\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"PGHOST=localhost PGPORT=5432 PGUSER=aadminn PGDATABASE=ttree # Либо убери эту строку и используй ~/.pgpass PGPASSWORD=ТВОЙ_ПАРОЛЬ_ОТ_aadminn # Твой бакет в Yandex Object Storage S3_BUCKET=s3://backupjupitersystems/memus-backups YC_S3_ENDPOINT=https://storage.yandexcloud.net # Статический ключ от сервисного аккаунта (скрин с \\\"default b1g6u3p4k78ihu9puge6\\\") AWS_ACCESS_KEY_ID=KEY_ID_ИЗ_ЯНДЕКСА AWS_SECRET_ACCESS_KEY=SECRET_ИЗ_ЯНДЕКСА AWS_DEFAULT_REGION=de-central1\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"(Если бакет всё‑таки в ru-central1, просто поменяй de-central1 на ru-central1 — это видно в карточке бакета в Object Storage.)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"2. Скрипт бэкапа\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"sudo nano /usr/local/bin/memus_pg_backup_to_s3.sh\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"table\",\"content\":[{\"type\":\"tableRow\",\"content\":[{\"type\":\"tableCell\",\"attrs\":{\"nodeTextAlign\":null,\"nodeVerticalAlign\":null,\"nodeTextColor\":null,\"nodeBackground\":null,\"colspan\":1,\"rowspan\":1,\"colwidth\":null},\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"#!/usr/bin/env bash set -euo pipefail [ -f /etc/default/memus-pg-backup ] && . /etc/default/memus-pg-backup TS=\\\"$(date +%Y%m%d-%H%M%S)\\\" TMP=\\\"/tmp/memus-ttree-$TS.dump.gz\\\" pg_dump -Fc --no-owner --no-privileges \\\\\"}]}]},{\"type\":\"tableCell\",\"attrs\":{\"nodeTextAlign\":null,\"nodeVerticalAlign\":null,\"nodeTextColor\":null,\"nodeBackground\":null,\"colspan\":1,\"rowspan\":1,\"colwidth\":null},\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"gzip -9 > \\\"$TMP\\\" aws --endpoint-url=\\\"$YC_S3_ENDPOINT\\\" \\\\ s3 cp \\\"$TMP\\\" \\\"$S3_BUCKET/memus-ttree-$TS.dump.gz\\\" rm -f \\\"$TMP\\\"\"}]}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"sudo chmod +x /usr/local/bin/memus_pg_backup_to_s3.sh\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"3. Cron\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"sudo crontab -e\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"15 3 * * * /usr/local/bin/memus_pg_backup_to_s3.sh >> /var/log/memus-pg-backup.log 2>&1\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После этого можно вручную один раз запустить скрипт и проверить, что в бакете backupjupitersystems в папке memus-backups появился .dump.gz, и что его получается восстановить через pg_restore.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"3a6df3cb-d7a7-476e-84e6-f337dec8cb98\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Голосовой бот для создания заметок и резюме\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Сделать бота, которому можно будет наговорить голосом сообщения, а он его пропустит через нейросеть и положит в быстрые заметки и файлик с голосом и резюме, сделанное нейросетью.\"}]}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"f8d5a66b-c2bd-4284-a6f9-de10f775384b\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"DONE\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Готово\"}]}]},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"61963866-d5c3-4ece-8124-9e3d6db8ef0e\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Сделали сворачивание/разворачивание блоков по пробелу\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"0de19835-6c48-4d0c-82c2-7b6ebc7e3771\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"+ Подключить авторизацию через Яндекс\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"+ Подключить авторизацию через Яндекс\"}]}]},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"48bdbe59-ca47-40b2-81a9-54c8ba7b2531\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Нужно реализовать на memus.pro интеграцию с Яндекс.Диском: пользователь логинится через Yandex ID, а вложения из интерфейса Memus загружаются напрямую в папку Memus на его Диске, при этом у вас хранятся только метаданные и ссылки. Ниже формальное ТЗ.\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Цель и общая схема\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При авторизации через Яндекс пользователь выдаёт приложению \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"memus.pro\"},{\"type\":\"text\",\"text\":\" доступ к своему Яндекс.Диску по OAuth 2.0 (Yandex ID).\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/disk/rest/\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+2\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Фронтенд (React) по пользовательскому \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"access_token\"},{\"type\":\"text\",\"text\":\" Яндекса загружает файлы прямо в \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"disk:/Memus\"},{\"type\":\"text\",\"text\":\" через REST API Диска; бэкенд принимает только служебные данные (пути, имена, размеры и т.д.).\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://gist.github.com/mdukat/59e1b1eafc2d5c047b9d0c443d215bd8\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"gist.github+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"OAuth Yandex ID для memus.pro\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В OAuth‑кабинете Яндекса зарегистрировать веб‑приложение c доменом \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"https://memus.pro\"},{\"type\":\"text\",\"text\":\", указав минимум redirect URI \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"https://memus.pro/auth/yandex/callback\"},{\"type\":\"text\",\"text\":\" (и тестовый \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"http://localhost:3000/auth/yandex/callback\"},{\"type\":\"text\",\"text\":\" для dev).\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.ru/dev/id/doc/en/concepts/ya-oauth-intro\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В настройках приложения выбрать тип «Web‑service» и включить права для работы с Яндекс.Диском (REST API) с доступом на чтение/запись файлов пользователя.\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/how-to\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"На бэкенде реализовать Authorization Code Flow: редирект на \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"/authorize\"},{\"type\":\"text\",\"text\":\" Яндекса с \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"client_id\"},{\"type\":\"text\",\"text\":\", при возврате \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"code\"},{\"type\":\"text\",\"text\":\" на \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"https://memus.pro/auth/yandex/callback\"},{\"type\":\"text\",\"text\":\" — обмен кода на \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"access_token\"},{\"type\":\"text\",\"text\":\" (и при необходимости \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"refresh_token\"},{\"type\":\"text\",\"text\":\") через \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"/token\"},{\"type\":\"text\",\"text\":\"; токены хранить привязанными к пользователю Memus.\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/access\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+2\"},{\"type\":\"text\",\"text\":\"​\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Папка\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"Memus\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"на Яндекс.Диске\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Все файлы приложения хранятся в корневой папке Яндекс.Диска пользователя с путём \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"disk:/Memus\"},{\"type\":\"text\",\"text\":\", которая должна быть видна в веб‑интерфейсе и клиентах Яндекс.Диска.\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/disk/\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При первом использовании интеграции для конкретного пользователя бэкенд по его \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"access_token\"},{\"type\":\"text\",\"text\":\" проверяет наличие ресурса \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"disk:/Memus\"},{\"type\":\"text\",\"text\":\" запросом \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"/v1/disk/resources?path=disk:/Memus\"},{\"type\":\"text\",\"text\":\"; если ресурс не найден, создаёт папку по этому пути через REST API.\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://hexdocs.pm/yandex_disk/YandexDisk.Folder.html\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"hexdocs+2\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В БД \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"memus.pro\"},{\"type\":\"text\",\"text\":\" фиксируется факт инициализации Я.Диска и путь \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"disk:/Memus\"},{\"type\":\"text\",\"text\":\" для данного пользователя; дальше все операции с файлами используют только этот путь (без хранения каких‑либо пользовательских файлов у вас).\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Поток загрузки файлов (React ↔ Я.Диск ↔ бэкенд)\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После логина фронтенд получает от бэкенда краткоживущий \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"access_token\"},{\"type\":\"text\",\"text\":\" Яндекса для текущего пользователя (или отдельный эндпоинт бэкенда делает запросы к Я.Диску по токену, если токен не выдаётся на клиент).\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/iam/concepts/authorization/oauth-token\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Для загрузки файла фронтенд выполняет два шага:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"GET https://cloud-api.yandex.net/v1/disk/resources/upload?path=disk:/Memus/<имя_файла>&overwrite=false\"},{\"type\":\"text\",\"text\":\" с \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"Authorization: OAuth <access_token>\"},{\"type\":\"text\",\"text\":\" — получает \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"href\"},{\"type\":\"text\",\"text\":\" для загрузки;\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"PUT\"},{\"type\":\"text\",\"text\":\"/\"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"POST\"},{\"type\":\"text\",\"text\":\" по \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"href\"},{\"type\":\"text\",\"text\":\" с бинарным телом файла (через \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"fetch\"},{\"type\":\"text\",\"text\":\"/XHR), при необходимости с тем же заголовком авторизации.\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://gist.github.com/mdukat/59e1b1eafc2d5c047b9d0c443d215bd8\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"gist.github+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После успешной загрузки фронтенд вызывает REST‑метод бэкенда \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"POST https://api.memus.pro/attachments\"},{\"type\":\"text\",\"text\":\" с данными: путь \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"disk:/Memus/<имя_файла>\"},{\"type\":\"text\",\"text\":\", оригинальное имя, размер, mime‑тип, связанный объект Memus (id заметки/диалога и т.п.), идентификатор пользователя.\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Метаданные, доступ и UI‑поведение\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Бэкенд хранит для каждого вложения: внутренний \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"attachment_id\"},{\"type\":\"text\",\"text\":\", \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"user_id\"},{\"type\":\"text\",\"text\":\", путь на Диске (\"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"disk:/Memus/...\"},{\"type\":\"text\",\"text\":\"), имя, тип, размер, дату создания, а также опционально \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"public_url\"},{\"type\":\"text\",\"text\":\", если файл был опубликован через \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"/resources/publish\"},{\"type\":\"text\",\"text\":\" (по умолчанию не публиковать).\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://hexdocs.pm/yandex_disk/YandexDisk.PublicFile.html\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"hexdocs+2\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При отображении вкладки с вложениями бэкенд отдаёт список этих метаданных; фронтенд по клику либо открывает стандартную веб‑страницу Яндекс.Диска (через сформированный URL по пути), либо переходит по сохранённому \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"public_url\"},{\"type\":\"text\",\"text\":\", если позже будет добавлен режим «по ссылке».\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://dis.kpfu.ru/wp-content/uploads/2023/10/how-to-start-working-in-yandex-disk.pdf\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"dis.kpfu+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"По умолчанию все файлы приватны и доступны только владельцу Яндекс‑аккаунта; автоматическая публикация/шаринг не выполняется без отдельного пользовательского действия и отдельного ТЗ на использование \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"resources/publish\"},{\"type\":\"text\",\"text\":\" и управление \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"public_url\"},{\"type\":\"text\",\"text\":\".\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/disk/rest/\",\"target\":\"_blank\",\"rel\":\"noopener\",\"class\":null}}],\"text\":\"yandex+1\"},{\"type\":\"text\",\"text\":\"​\"}]}]}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/disk/rest/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/disk/rest/\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.ru/dev/id/doc/en/concepts/ya-oauth-intro\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.ru/dev/id/doc/en/concepts/ya-oauth-intro\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/id/doc/en/\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://gist.github.com/mdukat/59e1b1eafc2d5c047b9d0c443d215bd8\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://gist.github.com/mdukat/59e1b1eafc2d5c047b9d0c443d215bd8\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/register-client\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/id/doc/en/register-client\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/how-to\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/id/doc/en/how-to\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/access\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/id/doc/en/access\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.ru/dev/id/doc/en/codes/code-url\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.ru/dev/id/doc/en/codes/code-url\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/disk/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/disk/\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://hexdocs.pm/yandex_disk/YandexDisk.Folder.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://hexdocs.pm/yandex_disk/YandexDisk.Folder.html\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/iam/concepts/authorization/oauth-token\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.cloud/en/docs/iam/concepts/authorization/oauth-token\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://hexdocs.pm/yandex_disk/YandexDisk.PublicFile.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://hexdocs.pm/yandex_disk/YandexDisk.PublicFile.html\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yadisk.readthedocs.io/en/v2.1.0/api_reference/response_objects.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yadisk.readthedocs.io/en/v2.1.0/api_reference/response_objects.html\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://dis.kpfu.ru/wp-content/uploads/2023/10/how-to-start-working-in-yandex-disk.pdf\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://dis.kpfu.ru/wp-content/uploads/2023/10/how-to-start-working-in-yandex-disk.pdf\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/compute/api-ref/Disk/get\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.cloud/en/docs/compute/api-ref/Disk/get\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yadisk.readthedocs.io/en/latest/intro.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yadisk.readthedocs.io/en/latest/intro.html\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://stackoverflow.com/questions/49765687/redirect-uri-using-http-instead-of-https\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://stackoverflow.com/questions/49765687/redirect-uri-using-http-instead-of-https\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/compute/operations/disk-control/disk-access\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.cloud/en/docs/compute/operations/disk-control/disk-access\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://stackoverflow.com/questions/63051565/how-can-use-yandex-disk-c-sharp-api\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://stackoverflow.com/questions/63051565/how-can-use-yandex-disk-c-sharp-api\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/dev/id/doc/en/suggest-connection\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/dev/id/doc/en/suggest-connection\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/resource-manager/concepts/resources-hierarchy\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.cloud/en/docs/resource-manager/concepts/resources-hierarchy\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/serverless-integrations/operations/workflows/constructor/yadisk\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.cloud/en/docs/serverless-integrations/operations/workflows/constructor/yadisk\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.com/support/disk-desktop-linux/cli-commands.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.com/support/disk-desktop-linux/cli-commands.html\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://npmjs.com/package/ya-disk\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://npmjs.com/package/ya-disk\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.oauth.com/oauth2-servers/redirect-uris/redirect-uris-native-apps/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://www.oauth.com/oauth2-servers/redirect-uris/redirect-uris-native-apps/\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://yandex.cloud/en/docs/iam/concepts/access-control/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://yandex.cloud/en/docs/iam/concepts/access-control/\"}]}]}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"02be1d36-ab25-46a3-bf24-c77d86bcc597\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Сделать это за один шаг нереально, поэтому лучше разбить на этапы. Ниже — конкретный план привязанный к вашему коду (FastAPI + vanilla JS), без лишней теории.\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"1. Хранение токенов Яндекса\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В servpy/app/schema.py добавить таблицу, привязанную к пользователю, например:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"CREATE TABLE IF NOT EXISTS user_yandex_tokens ( user_id TEXT PRIMARY KEY, access_token TEXT NOT NULL, refresh_token TEXT, expires_at TEXT, disk_root TEXT NOT NULL DEFAULT 'disk:/Memus', initialized INTEGER NOT NULL DEFAULT 0, FOREIGN KEY(user_id) REFERENCES users(id) ON DELETE CASCADE );\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"И аналогичный блок в _init_postgres_schema.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В servpy/app/data_store.py — небольшие хелперы:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"get_yandex_tokens(user_id) / set_yandex_tokens(user_id, ...)\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"mark_yandex_disk_initialized(user_id, root='disk:/Memus').\"}]}]}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"2. OAuth Яндекс ID (бэкенд)\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В servpy/app/main.py завести env‑переменные:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"YANDEX_CLIENT_ID = os.environ.get('YANDEX_CLIENT_ID') or '' YANDEX_CLIENT_SECRET = os.environ.get('YANDEX_CLIENT_SECRET') or '' YANDEX_REDIRECT_URI = os.environ.get('YANDEX_REDIRECT_URI') or 'https://memus.pro/auth/yandex/callback'\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Добавить ручку «логин через Яндекс»:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"@app.get('/api/auth/yandex/login') def yandex_login(request: Request): if not YANDEX_CLIENT_ID or not YANDEX_CLIENT_SECRET: raise HTTPException(500, 'Yandex OAuth не настроен') state = os.urandom(16).hex() params = { 'response_type': 'code', 'client_id': YANDEX_CLIENT_ID, 'redirect_uri': YANDEX_REDIRECT_URI, 'scope': 'login:email,disk.read,yadisk:disk.read yadisk:disk.write', 'state': state, } resp = RedirectResponse( url='https://oauth.yandex.ru/authorize?' + urllib.parse.urlencode(params), ) resp.set_cookie('yandex_oauth_state', state, httponly=True, samesite='lax', path='/') return resp\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"И колбэк:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"@app.get('/auth/yandex/callback') def yandex_callback(request: Request): if not YANDEX_CLIENT_ID or not YANDEX_CLIENT_SECRET: raise HTTPException(500, 'Yandex OAuth не настроен') params = dict(request.query_params) code = params.get('code') or '' state = params.get('state') or '' if not code: raise HTTPException(400, 'Не передан code от Яндекса') cookie_state = request.cookies.get('yandex_oauth_state') or '' if cookie_state and cookie_state != state: raise HTTPException(400, 'Некорректный state для Yandex OAuth') # обмен кода на токен data = urllib.parse.urlencode({ 'grant_type': 'authorization_code', 'code': code, 'client_id': YANDEX_CLIENT_ID, 'client_secret': YANDEX_CLIENT_SECRET, }).encode('utf-8') try: req = urllib.request.Request( 'https://oauth.yandex.ru/token', data=data, headers={'Content-Type': 'application/x-www-form-urlencoded'}, ) with urllib.request.urlopen(req, timeout=10) as resp: token_info = json.loads(resp.read().decode('utf-8')) except Exception: raise HTTPException(502, 'Не удалось связаться с Яндексом (token)') access_token = token_info.get('access_token') refresh_token = token_info.get('refresh_token') expires_in = token_info.get('expires_in') if not access_token: raise HTTPException(400, 'Яндекс не вернул access_token') # получить профиль (email / uid) try: req = urllib.request.Request( 'https://login.yandex.ru/info?format=json', headers={'Authorization': f'OAuth {access_token}'}, ) with urllib.request.urlopen(req, timeout=10) as resp: user_info = json.loads(resp.read().decode('utf-8')) except Exception: raise HTTPException(502, 'Не удалось получить профиль Яндекса') email = (user_info.get('default_email') or '').strip().lower() uid = str(user_info.get('id') or '') if not email and not uid: raise HTTPException(400, 'Яндекс не вернул идентификатор пользователя') username = email or f'yandex:{uid}' # найти/создать локального пользователя (по username) existing = get_user_by_username(username) if existing: user = existing else: random_pwd = os.urandom(16).hex() display_name = (user_info.get('real_name') or username) or None user = create_user(username, random_pwd, display_name, is_superuser=False) # сохранить токены Яндекса expires_at = None if expires_in: expires_at = (datetime.utcnow() + timedelta(seconds=int(expires_in))).isoformat() upsert_yandex_tokens(user.id, access_token, refresh_token, expires_at) # гарантировать help‑статью, как для Google try: ensure_help_article_for_user(user.id) except Exception as exc: logger.error('Failed to ensure help article after Yandex auth for %s: %r', user.id, exc) sid = create_session(user.id) redirect = RedirectResponse(url='/', status_code=302) set_session_cookie(redirect, sid) redirect.delete_cookie('yandex_oauth_state', path='/') return redirect\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Где upsert_yandex_tokens — ваш хелпер в data_store.py.\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"3. Инициализация папки disk:/Memus\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В data_store.py сделать функцию, которая по user_id:\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Берёт access_token Яндекса.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Делает GET \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://cloud-api.yandex.net/v1/disk/resources?path=disk:/Memus\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://cloud-api.yandex.net/v1/disk/resources?path=disk:/Memus\"},{\"type\":\"text\",\"text\":\" с заголовком Authorization: OAuth <access_token>.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если 404 — делает PUT \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://cloud-api.yandex.net/v1/disk/resources?path=disk:/Memus\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://cloud-api.yandex.net/v1/disk/resources?path=disk:/Memus\"},{\"type\":\"text\",\"text\":\".\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После успеха помечает в user_yandex_tokens.initialized = 1.\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Обёртку‑ручку:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"@app.post('/api/yandex/disk/init') def init_yandex_disk(current_user: User = Depends(get_current_user)): ensure_yandex_disk_memus_folder(current_user.id) return {'ok': True, 'root': 'disk:/Memus'}\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"4. Выдача upload‑URL для файла\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Бэкенд‑ручка:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"@app.post('/api/yandex/disk/upload-url') def get_yandex_upload_url(payload: dict[str, Any], current_user: User = Depends(get_current_user)): filename = (payload.get('filename') or '').strip() if not filename: raise HTTPException(400, 'filename is required') token = get_yandex_tokens(current_user.id) if not token: raise HTTPException(400, 'Yandex Disk не подключён') path = f'disk:/Memus/{filename}' url = f'https://cloud-api.yandex.net/v1/disk/resources/upload?{urllib.parse.urlencode({\\\\\\\"path\\\\\\\": path, \\\\\\\"overwrite\\\\\\\": \\\\\\\"false\\\\\\\"})}' req = urllib.request.Request(url, headers={'Authorization': f'OAuth {token.access_token}'}) try: with urllib.request.urlopen(req, timeout=10) as resp: data = json.loads(resp.read().decode('utf-8')) except Exception: raise HTTPException(502, 'Не удалось получить upload URL от Яндекс.Диска') href = data.get('href') method = data.get('method', 'PUT') if not href: raise HTTPException(500, 'Некорректный ответ Яндекс.Диска (нет href)') return {'href': href, 'method': method, 'path': path}\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Характерная особенность: href Я.Диска уже пред‑подписан, для PUT по нему авторизация не нужна.\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"5. Метаданные вложений\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Расширить уже имеющуюся таблицу attachments:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"добавить столбец user_id (и для Postgres, и для SQLite), если его ещё нет;\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"договориться, что stored_path для Яндекс‑файлов — это disk:/Memus/....\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В servpy/app/main.py добавить:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"@app.post('/api/attachments') def create_attachment(payload: dict[str, Any], current_user: User = Depends(get_current_user)): article_id = (payload.get('articleId') or '').strip() path = (payload.get('path') or '').strip() original_name = (payload.get('originalName') or '').strip() content_type = (payload.get('contentType') or None) size = int(payload.get('size') or 0) if not article_id or not path or not original_name: raise HTTPException(400, 'articleId, path и originalName обязательны') article = get_article(article_id, current_user.id) if not article: raise HTTPException(404, 'Статья не найдена') att_id = str(uuid.uuid4()) now = iso_now() CONN.execute( ''' INSERT INTO attachments (id, article_id, stored_path, original_name, content_type, size, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) ''', (att_id, article_id, path, original_name, content_type, size, now), ) return { 'id': att_id, 'articleId': article_id, 'path': path, 'originalName': original_name, 'contentType': content_type, 'size': size, 'createdAt': now, }\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"(Если такой ручки уже есть — адаптировать под новый формат, не ломая старый /uploads/....)\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"6. Фронтенд: кнопка «Войти через Яндекс» и загрузка\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В client/index.html:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В оверлее авторизации рядом с Google‑кнопкой добавить кнопку «Войти через Яндекс» (id=\\\"authYandexLoginBtn\\\").\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В client/refs.js завести authYandexLoginBtn.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В client/events.js в attachEvents():\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"if (refs.authYandexLoginBtn) { refs.authYandexLoginBtn.addEventListener('click', (event) => { event.preventDefault(); window.location.href = '/api/auth/yandex/login'; }); }\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Для загрузки файла из UI (когда появится соответствующая кнопка вложений):\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Выбрать файл через <input type=\\\"file\\\">.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Запросить upload‑URL:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"const resp = await apiRequest('/api/yandex/disk/upload-url', { method: 'POST', body: JSON.stringify({ filename: file.name }), });\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"await fetch(resp.href, { method: resp.method || 'PUT', body: file });\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После 2xx:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"await apiRequest('/api/attachments', { method: 'POST', body: JSON.stringify({ articleId: state.articleId, path: resp.path, originalName: file.name, contentType: file.type || null, size: file.size, }), });\"}]}]}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"7. UI просмотра вложений\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Для страницы статьи (отдельная вкладка «Вложения» либо список под заголовком):\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"запрос GET /api/articles/{articleId}/attachments;\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"рендер списка ссылок:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"пока без public_url: просто строить URL вида \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://disk.yandex.ru/client/disk/Memus/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://disk.yandex.ru/client/disk/Memus/\"},{\"type\":\"text\",\"text\":\"<имя> или \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://disk.yandex.ru/client/disk\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://disk.yandex.ru/client/disk\"},{\"type\":\"text\",\"text\":\" + подсказка «см. этот файл на Я.Диске по имени/пути».\"}]}]}]}]}]}]}]}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"320702fe-879a-4001-965d-bc3ede6fc621\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"При переходе стрелками по блокам они прокручиваются, .. неудобно\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При переходе стрелками по блокам они прокручиваются, .. неудобно\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"da72b78f-a8b0-4cd6-8656-7d1057111eb4\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"не надо Использование двух аккаунтов для входа?.\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"только чтобы аттачменты можно было хранить и на яндексе и в гугле - надо ли?\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"ab74af98-55bc-4fb7-abec-753c3b185fdf\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"+ Цель: реализовать загрузку файлов из React‑клиента напрямую в Google Drive пользователя\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"(в папку `Memus`) с сохранением в вашей системе только метаданных и ссылки/ID файла.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"## Цель и общая логика\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- При авторизации через Google пользователь даёт приложению ограниченный доступ к своему Drive; все файлы создаются от его имени и хранятся в его аккаунте.[1][2]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- Клиент (React) загружает файл сразу в Google Drive по пользовательскому `access_token`, минуя ваш сервер по содержимому; сервер получает только `fileId`, `webViewLink` и прочие метаданные для хранения и отображения.[3][4][1]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"## Авторизация Google и права\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- В Google Cloud Console включён Google Drive API для проекта и создан OAuth‑клиент типа Web Application.[5][6][7]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- При логине через Google фронтенд запрашивает scope не менее `\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.googleapis.com/auth/drive.file`,\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://www.googleapis.com/auth/drive.file`,\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"чтобы приложение могло создавать и читать только свои файлы в Google Drive пользователя.[2][8][9]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- `access_token`, выданный Google, используется React‑клиентом для всех запросов к Drive API (`Authorization: Bearer <token>`), без прокидывания файлового контента через ваш бэкенд.[4][1]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"## Папка Memus в Google Drive\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- Для каждого пользователя используется одна рабочая папка Google Drive с именем `Memus`, лежащая в его «Мой диск» (родитель `root`), чтобы пользователь видел все файлы в стандартном интерфейсе Google Drive.[10][11]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- При первом аплоаде приложение проверяет наличие папки `Memus` запросом `files.list` с фильтром по `mimeType='application/vnd.google-apps.folder'`, имени и родителю; при отсутствии создаёт её через `files.create` с `mimeType = \\\"application/vnd.google-apps.folder\\\"`, `name = \\\"Memus\\\"`, `parents = [\\\"root\\\"]`.[12][10]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- `folderId` папки `Memus` для конкретного пользователя сохраняется в вашей БД и далее всегда используется как единственный `parent` при создании файлов, чтобы все вложения оказывались именно там.[13][10]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"## Загрузка файлов из React\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- При выборе файла в интерфейсе React формирует запрос `POST\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,webViewLink`\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id,webViewLink`\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"с заголовком `Authorization: Bearer <access_token>` и телом `multipart/related` (часть с метаданными JSON, часть с бинарным содержимым файла).[14][1][3]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- В JSON‑метаданных указываются как минимум `name`, `mimeType` и `parents: [\\\"<folderId_Memus_пользователя>\\\"]`, чтобы файл создавался в нужной папке.[10][12]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- После успешного ответа React получает `fileId` и, при наличии, `webViewLink` и передаёт эти данные на ваш сервер по своему REST‑API (например, `POST /attachments`), вместе с бизнес‑метаданными (к чему привязан файл, размер, тип и т.п.).[15][1]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"## Хранение метаданных и работа со ссылками\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- Ваш сервер хранит для каждого вложения как минимум `fileId`, `userId`, `folderId` (Memus), имя, `mimeType`, размер, дату создания и при наличии `webViewLink`; бизнес‑объект (заявка, сессия и т.п.) связывается с этим вложением по своей схеме.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- В UI при показе вложений для пользователя используется сохранённый `webViewLink` или URL формата `\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://drive.google.com/file/d/\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://drive.google.com/file/d/\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"<fileId>/view`, который остаётся рабочим при переименовании и перемещении файла внутри его Drive, так как привязан к постоянному идентификатору `fileId`.[16][17][15]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- Доступ по ссылке определяется правами файла в Google Drive: по умолчанию файл приватен (виден только владельцу и явно добавленным пользователям), а расширение доступа («по ссылке», расшаривание другим) пользователь делает сам через стандартный интерфейс Drive; автоматическое создание публичных ссылок текущим ТЗ не предусматривается.[18][19][20]\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[1](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/guides/manage-uploads)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/guides/manage-uploads)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[2](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/guides/api-specific-auth)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/guides/api-specific-auth)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[3](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://stackoverflow.com/questions/53839499/google-drive-api-and-file-uploads-from-the-browser)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://stackoverflow.com/questions/53839499/google-drive-api-and-file-uploads-from-the-browser)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[4](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/quickstart/js)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/quickstart/js)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[5](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://docs.cloud.google.com/endpoints/docs/openapi/enable-api)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://docs.cloud.google.com/endpoints/docs/openapi/enable-api)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[6](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/guides/enable-apis)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/guides/enable-apis)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[7](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://support.google.com/googleapi/answer/6158849?hl=en)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://support.google.com/googleapi/answer/6158849?hl=en)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[8](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/identity/protocols/oauth2/scopes)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/identity/protocols/oauth2/scopes)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[9](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://groups.google.com/g/google-apps-script-community/c/_W-NKbttfbo)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://groups.google.com/g/google-apps-script-community/c/_W-NKbttfbo)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[10](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/guides/folder)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/guides/folder)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[11](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/guides/about-files)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/guides/about-files)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[12](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/guides/create-file)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/guides/create-file)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[13](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.merge.dev/blog/get-folders-google-drive-api)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://www.merge.dev/blog/get-folders-google-drive-api)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[14](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://gist.github.com/tanaikech/bd53b366aedef70e35a35f449c51eced)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://gist.github.com/tanaikech/bd53b366aedef70e35a35f449c51eced)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[15](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://community.latenode.com/t/how-to-retrieve-shareable-url-using-google-drive-rest-api/21798)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://community.latenode.com/t/how-to-retrieve-shareable-url-using-google-drive-rest-api/21798)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[16](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/reference/rest/v2/files)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/reference/rest/v2/files)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[17](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://community.latenode.com/t/do-google-drive-file-identifiers-remain-unique-across-all-operations/28008)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://community.latenode.com/t/do-google-drive-file-identifiers-remain-unique-across-all-operations/28008)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[18](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/reference/rest/v3/permissions/create)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/reference/rest/v3/permissions/create)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[19](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://developers.google.com/workspace/drive/api/guides/ref-roles)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://developers.google.com/workspace/drive/api/guides/ref-roles)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[20](\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.nightfall.ai/blog/google-drive-permissions-1)\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://www.nightfall.ai/blog/google-drive-permissions-1)\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"a6131a9e-3871-4fb9-8a5b-d67d981fc96c\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"+ Подумать над UNDO\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Надо ли сохранять структуру? - структуру не храним Показывать историю изменения одного блока? - пока нет, но можем. Сделали корзину удалённых блоков.\"}]}]},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"c2ef6ac7-7a9b-430f-9350-7dbdca0f9d8e\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Корзина блоков для страницы выглядит логичнее. Я бы сделал так:\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Модель / данные\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"На стороне статьи завести что‑то вроде article.blockTrash: [{ id, text, children, deletedAt, originalParentId, originalIndex }].\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При удалении блока:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"вырезаем его из дерева;\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"пушим полный snapshot в blockTrash (с originalParentId и originalIndex);\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"сохраняем статью.\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Эта корзина живёт в статье, значит переживает перезагрузку и даже перезапуск браузера.\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Восстановление\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Кнопка «Корзина блоков» в панели статьи (рядом с «Слияние», «Удалить блок»).\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В ней список удалённых блоков (по deletedAt, можно показать первые строки).\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При «Восстановить»:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"пробуем вернуть по originalParentId/originalIndex, если родитель и позиция ещё существуют;\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"если не получилось — кладём блок:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"либо в начало blocks,\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"либо в конец, как «плавающий» блок (я бы выбрал «в конец» — меньше ломает структуру).\"}]}]}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После восстановления запись из blockTrash удаляем.\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Undo/redo и Esc по пустому\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Мгновенный Ctrl+Z после удаления всё ещё может работать через текущий undoStack (как сейчас).\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"После перезагрузки — уже только через «Корзину блоков».\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Для кейса Esc по пустому «новорожденному» блоку:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"вообще не заносим его в blockTrash и не пушим type:'structure' в undo (он никогда не содержал полезного текста → просто исчез).\"}]}]}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В итоге:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Проблема «куда точно вернуть» решается: мы пробуем «туда же», а если не можем — есть простой и предсказуемый fallback (например, в конец статьи).\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Можно восстановить блок даже через неделю после удаления и перезагрузок, пока он есть в корзине.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Undo остаётся быстрым для последнего действия, но не единственным способом отката.\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если тебе такой сценарий подходит, далее можно уже детализировать: как именно выглядит UI корзины блоков и какие поля добавить в модель статьи.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Да, ты прав по обоим пунктам.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Корзина и шифрование\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если корзина блоков хранит полные тексты удалённых блоков в явном виде, при включении шифрования статьи лучше:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"либо очищать корзину (blockTrash = []),\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"либо шифровать содержимое корзины вместе с остальными блоками.\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"С точки зрения простоты и предсказуемости поведение такое:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"включили шифрование → корзина этой статьи очищается (удалённые блоки считаем окончательно утерянными);\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"выключение шифрования корзину уже не восстанавливает.\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"Это снимает риск, что в blockTrash останется незашифрованный текст.\"}]}]}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Фокус после восстановления\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Да, при восстановлении из корзины нужно:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"вернуть блок в дерево (по старому месту или в конец/начало);\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"сделать его текущим: state.currentBlockId = restoredId; state.scrollTargetBlockId = restoredId;\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"и через focusBlock(restoredId) / ensureBlockVisible прокрутить к нему #blocksContainer.\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"Иначе UX ломается: пользователь жмёт «Восстановить» и не видит, куда именно вернулся блок.\"}]}]}]}]}]}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"85347f62-9dd1-4281-83bd-1563b1abb20f\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Куда-то в сайдбар прикрутить телеграм бота - справа внизу\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Куда-то в сайдбар прикрутить телеграм бота - справа внизу\"}]}]},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"796b4ce2-53ba-4ca9-9b4b-bc4ad204fe44\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Memus_feedback_bot\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Перезапуск:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"sudo systemctl restart memus_feedback_bot.service sudo systemctl status memus_feedback_bot.service \"},{\"type\":\"hardBreak\"}]}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"d3b995f8-a307-4be2-8a6a-4da9cd73229a\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"В меню \\\"Таблица\\\" нужно вставить отмену таблицы\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При этом должно происходить преобразование таблицы в обычный текст, где каждая ячейка - отдельный абзац.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"3f831749-8975-421d-86eb-8581fbf5a157\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Проверка количества записей в LocalStorage ttree_outline_autosave_queue_docjson_v1\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В LocalStorage ttree_outline_autosave_queue_docjson_v1 содержит много записей - так и должно быть?\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"3e7224fb-4a23-4612-88b7-06cba48ca40e\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Переход первой строки в заголовок при Backspace\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Когда мы в начале тела блока нажимаем Backspace, первая строка тела блока должна переходить в заголовок блока.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"6ce80423-3cd3-4fc9-a0b7-fd940e171634\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Ctrl-Del удаляет блок\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"e71d233c-7959-4d67-bd6d-335ab2ea2c77\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Команда cancelTable должна работать последовательно. \"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если у нас вложенные таблицы, то она должна снимать только одну, самую внешнюю таблицу. А вложенные не трогать.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"И если в таблице есть рисунки - их не надо удалять!\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"Т.е. команда не должна ничего делать с содержимом ячеек!\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"c080d473-0811-4fb5-8ce8-46f9e0b6d4a1\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Открытие страницы с позиционированием на выбранный блок\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Когда мы через поиск находим блок и выбираем его, нужная страница должна не только открыться, но и спозиционироваться на этот блок (при необходимости развернув дерево).\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"661579f9-550e-46e3-9545-310f98cea5de\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Функции выделения и редактирования текста в блоках\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"В режиме просмотра и редактирования Ctrl-A внутри блока (в заголовке или теле блока) должна выделять весь текст блока - заголовок и тело. \"},{\"type\":\"hardBreak\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"Повторное нажатие Ctrl-A на заголовке блока должно выделять всю статью.\"}]},{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]}]}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"07c016fe-2e6b-484d-817c-4e4421a01749\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Рекламный материал\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Рекламный материал\"}]}]},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"20df486d-f5a8-40c8-a2a0-3aacd6e8ff0e\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Memus.pro — ваша личная база знанийВсё, что вы узнали — в одном месте. Удобно. Н\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\",\"marks\":[{\"type\":\"bold\"}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Memus.pro — ваша личная база знаний\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Всё, что вы узнали — в одном месте. Удобно. Надёжно. Везде с вами.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Почему Memus?\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Memus — это современная платформа для хранения знаний, которая работает так, как думает ваш мозг. Забудьте о хаосе заметок, разбросанных по десяткам приложений.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Ключевые преимущества\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Блочная структура вместо хаоса\"},{\"type\":\"text\",\"text\":\" — каждая мысль в своём блоке, который невозможно случайно изменить или потерять​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Работает везде\"},{\"type\":\"text\",\"text\":\" — открывайте на компьютере, телефоне или планшете без синхронизации​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Умный поиск\"},{\"type\":\"text\",\"text\":\" — находит информацию даже по словам в другом падеже или порядке​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Сквозное шифрование\"},{\"type\":\"text\",\"text\":\" — конфиденциальные заметки защищены паролем прямо на вашем устройстве​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"PWA-приложение\"},{\"type\":\"text\",\"text\":\" — устанавливается как обычное мобильное приложение на Android, iOS и Huawei​\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Что умеет Memus?\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"📝 Быстрые заметки\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Записывайте мысли мгновенно, а разложите по местам потом — специальный Inbox для спонтанных идей.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"🔗 Связи между статьями\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Создавайте связи — превращайте заметки в базу знаний.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"🔐 Шифрование\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Защитите приватные заметки паролем — данные шифруются локально и уходят на сервер уже зашифрованными.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"🌐 Публичные ссылки\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Одна кнопка — и статью можно поделиться с коллегами или друзьями без регистрации.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"💾 Полный контроль над данными\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Экспорт в красивый HTML с изображениями​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Полный ZIP-бэкап всех статей​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Импорт из Obsidian, Logseq и Markdown​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Бесконечная история изменений с визуальным сравнением версий​\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"⌨️ Горячие клавиши\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Работайте со скоростью мысли — десятки комбинаций для навигации, редактирования и структурирования.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Для кого Memus?\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"✅ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Студенты и исследователи\"},{\"type\":\"text\",\"text\":\" — структурируйте конспекты и источники\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"✅ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Разработчики\"},{\"type\":\"text\",\"text\":\" — храните код-сниппеты и техническую документацию\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"✅ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Писатели\"},{\"type\":\"text\",\"text\":\" — собирайте идеи и материалы для проектов\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"✅ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Менеджеры\"},{\"type\":\"text\",\"text\":\" — ведите рабочие заметки и процессы\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"✅ \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Все, кто ценит порядок\"},{\"type\":\"text\",\"text\":\" — замените хаос стикеров и файлов на систему\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Начните прямо сейчас\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"🌐 \"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://memus.pro/\",\"target\":\"_blank\",\"rel\":\"nofollow noopener\",\"class\":null}},{\"type\":\"bold\"}],\"text\":\"memus.pro\"},{\"type\":\"text\",\"text\":\" — откройте в браузере или установите как приложение\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"🔑 \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Вход через Google\"},{\"type\":\"text\",\"text\":\" — никаких паролей, всё просто\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"📱 \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"PWA\"},{\"type\":\"text\",\"text\":\" — работает офлайн после установки\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Особенности для продвинутых\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Граф связей между статьями​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Drag & Drop для реорганизации блоков​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Интеграция с облачными дисками (Яндекс.Диск, Google Drive)​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Поддержка изображений с автоматической оптимизацией в WebP​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Контекстное меню с форматированием и вставкой ссылок​\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Memus.pro\"},{\"type\":\"text\",\"text\":\" — перестаньте терять знания. Начните их собирать.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"hardBreak\"}]},{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"ea74328e-2f0b-4351-8e1a-acfc3725ffdd\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Иконки\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Иконки\"}]}]},{\"type\":\"outlineChildren\",\"content\":[{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"c333e77b-de21-46e6-bc43-cdbf0e62c00d\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Без названия\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"image\",\"attrs\":{\"src\":\"/uploads/e0705e9f30a7567e4e969e4a5500e194/images/2025/12/1765302815361-8b0887d8.webp\",\"alt\":\"image.png\",\"title\":null,\"width\":null,\"height\":null,\"uploadToken\":null}}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"e9513c9a-c33f-44cb-8ad7-b36f23460d81\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"The following tables display all Segoe Fluent Icons glyphs and their respective \"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"The following tables display all \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"Segoe Fluent Icons\"},{\"type\":\"text\",\"text\":\" glyphs and their respective unicode values and descriptive names. Select a range from the following list to view glyphs according to the PUA range they belong to.\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://learn.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font#pua-e700-e900\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"PUA E700-E900\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://learn.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font#pua-ea00-ec00\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"PUA EA00-EC00\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://learn.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font#pua-ed00-ef00\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"PUA ED00-EF00\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://learn.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font#pua-f000-f200\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"PUA F000-F200\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://learn.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font#pua-f300-f500\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"PUA F300-F500\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://learn.microsoft.com/en-us/windows/apps/design/style/segoe-fluent-icons-font#pua-f600-f800\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"PUA F600-F800\"}]}]}]}]},{\"type\":\"outlineChildren\"}]}]}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"6861c2bf-04ec-48f0-8127-6c8550914646\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Как организовать бэкап ваших данных на FTP хранилище\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.robovps.biz/help/186-howto-backup-your-data-on-ftp.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"https://www.robovps.biz/help/186-howto-backup-your данные на ftp.html\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"43e02a18-6bda-433d-a6d4-24e9ed16b368\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"http://vps.sweb.ru\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"vps.sweb.ru\"},{\"type\":\"text\",\"text\":\" \"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"/api/yandex/disk/file?path=app%3A%2Fid_rsa.zip\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"class\":null}}],\"text\":\"id_rsa.zip\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"23fb92a7-f682-47e4-8154-9db7ac3c0fdd\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Исправление ошибок в тексте на русском языке\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Исправь ВСЕ следующие ошибки в тексте на русском языке, НЕ добавляя новые слова, НЕ удаляя существующие слова и НЕ меняя их порядок и НЕ нарушая HTML разметку:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"1. Орфография (опечатки, замены букв)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"2. Пунктуация (точки, запятые, тире, кавычки)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"3. Заглавные буквы (начало предложений, имена собственные)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"4. Повторы слов (удали дубликаты подряд идущих одинаковых слов)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"5. Согласование падежей, чисел, родов (только если слово уже есть)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Правила:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- Меняй ТОЛЬКО слова, которые уже есть в тексте\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- НЕ добавляй новые слова или фразы\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- НЕ удаляй смысловые слова (только повторы)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- НЕ перефразируй предложения\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"- Сохрани все существующие сокращения, имена, числа\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Примеры:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"\\\"я пошол в магазйн купить хлеб и хлеба\\\" → \\\"Я пошёл в магазин купить хлеб\\\"\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"\\\"привет привет как дела как дела\\\" → \\\"Привет, как дела?\\\"\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"\\\"кот сидит на мате и мурчит мурчит\\\" → \\\"Кот сидит на мате и мурчит.\\\"\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Текст для исправления:\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"[ВСТАВЬТЕ ТЕКСТ ЗДЕСЬ]\"}]},{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"0d7c0c0e-a25d-4dd2-89d8-2a2d72194c78\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Summary на телеграм-чат, сохранённый в json\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://www.perplexity.ai/search/kak-mne-propustit-dlinnuiu-per-ORm3Hen7SGqzjuOgZGYFfw\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://www.perplexity.ai/search/kak-mne-propustit-dlinnuiu-per-ORm3Hen7SGqzjuOgZGYFfw\"},{\"type\":\"hardBreak\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"C:\\\\SAND\\\\SummarizeTGchat\\\\telegram_\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"http://summary.py\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"summary.py\"},{\"type\":\"text\",\"text\":\" \"}]},{\"type\":\"paragraph\"},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"промпт указан в теле скрипта\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"4a8f825b-f972-40c0-b32c-b1c269dac8bb\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Разбор ТГ чата по соционике\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"python tg_threads_\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"http://keywords.py\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"keywords.py\"},{\"type\":\"text\",\"text\":\" result.json --out-md out_\"},{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"http://threads.md\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"threads.md\"},{\"type\":\"text\",\"text\":\" --out-json out_hits.json --context-up 4 --context-down 3\"}]},{\"type\":\"paragraph\"},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"--context-up 4\"},{\"type\":\"text\",\"text\":\" и \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"--context-down 3\"},{\"type\":\"text\",\"text\":\" — это параметры скрипта (аргументы командной строки), которые управляют тем, \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"сколько “контекста” вокруг найденного сообщения\"},{\"type\":\"text\",\"text\":\" попадёт в отчёт, когда скрипт строит ветки по \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"reply_to_message_id\"},{\"type\":\"text\",\"text\":\" (то есть по тому, кто кому отвечает).​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Что значит --context-up 4\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если сообщение содержит ключевое слово, то \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"--context-up 4\"},{\"type\":\"text\",\"text\":\" добавляет в вывод \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"до 4 сообщений-родителей\"},{\"type\":\"text\",\"text\":\" по цепочке ответов: “это сообщение → на что оно ответило → на что ответили до этого → …” (максимум 4 шага вверх).​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Это нужно, чтобы видеть, \"},{\"type\":\"text\",\"marks\":[{\"type\":\"italic\"}],\"text\":\"на какой тезис отвечали\"},{\"type\":\"text\",\"text\":\", даже если ключевое слово встречается только в реплике-ответе.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Что значит --context-down 3\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"--context-down 3\"},{\"type\":\"text\",\"text\":\" добавляет \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"потомков\"},{\"type\":\"text\",\"text\":\" найденного сообщения: ответы на него, ответы на ответы и т.д. — \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"до 3 уровней глубины\"},{\"type\":\"text\",\"text\":\".​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Это нужно, чтобы захватить продолжение обсуждения после ключевой фразы (например, уточнения/возражения/примеры), не вытаскивая весь чат целиком.​\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Мини-пример\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если ключевое слово встречается в сообщении \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"M\"},{\"type\":\"text\",\"text\":\", то при \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"--context-up 4 --context-down 3\"},{\"type\":\"text\",\"text\":\" в отчёт попадут:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":false},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Родители: \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"M<-P1<-P2<-P3<-P4\"},{\"type\":\"text\",\"text\":\" (если они есть).​\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Ответы: \"},{\"type\":\"text\",\"marks\":[{\"type\":\"code\"}],\"text\":\"M->C1->C2->C3\"},{\"type\":\"text\",\"text\":\" (по уровням, если есть цепочки).​\"}]}]}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Если хочешь, можно сделать “контекст вниз” не по уровням, а по количеству сообщений (например, максимум 20 ответов суммарно) — это иногда удобнее в больших ветках.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"01608e0c-b23c-4926-b8ea-f0783c3f8481\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Выбор блоков с установленными галочками\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"При выборе блоков галочки должны стоять только у выбранных блоков.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"9bc2c134-59a0-4c08-954d-2590efa474e5\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Использование Alt-стрелок в работе\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Нужно, чтобы Alt-стрелки работали в ячейке таблицы как в блоке — т.е. двигали текст\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"bd1764bb-3e46-4ee5-8592-9aa7122188a0\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Создание блока с помощью Ctrl-Enter\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Создание нового блока по Ctrl-Enter (в режиме просмотра). Если нажимаем в начале заголовка, то сверху, если в любом другом месте, то снизу.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"d44eb3c4-6534-4a68-8109-5a20192410f0\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Светлая тема\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"70f95924-4767-4533-aae9-3e5a7f6765e3\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Оптимизация перемещения курсора по блокам\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Когда идём вверх по блокам (стрелкой вверх), то курсор сначала становится в конец заголовка верхнего блока, потом в его начало, а потом только в следующий верхний блок. Из-за этого приходится 2 раза стрелку нажимать, чтобы на 1 блок вверх подняться. Надо сразу вставать в начало заголовка блока.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"59fd6553-6446-4c79-9de0-1c9f0fcc5d00\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Вставка форматированного текста из HTML и markdown\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Вставка форматированного текста из HTML и markdown с сохранением форматирования \"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://tiptap.dev/docs/editor/api/commands/content/insert-content-at#use-the-insertcontentat-command\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://tiptap.dev/docs/editor/api/commands/content/insert-content-at#use-the-insertcontentat-command\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"da84ff69-212b-42c9-a0fe-978623acb5cb\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Пометка и снятие пометки блока\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Способ пометить блок и снять пометку. Не для копирования, а просто для себя. Например, чтобы отметить, что сделано, а что нет.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Возможно, нужно сделать быстрый выбор цвета фона блока. Хотя фон у нас занят.\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"4627fa18-bf1c-4a0e-8650-ffdcc604873f\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Ошибка загрузки HTML файлов\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Ошибка при загрузке HTML файлов\"}]},{\"type\":\"paragraph\"},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"editor.js:616 [outline][proofread] leave_section {from: '24442853-4a7b-4fa5-9335-95b3347bcad6', to: 'eb6b06ac-5b0e-4e24-b7a3-3833463ecb98', changed: false}\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"api.js:102 [perf][api] /api/outline/generate-title {status: 200, ms: 1971, fetchMs: 1971, jsonMs: 0, serverMs: null, …}\"}]},{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"b009e2e3-c0c7-41ef-8cb9-b6575cd80908\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Светлая тема\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Considering the Context\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now focusing on the user's need for a \\\"Light Theme\\\" design change to the HTML page. I've noted the request specifies a \\\"Clean\\\" theme previously provided and am now aiming to meet the \\\"Light Theme\\\" specification instead.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Adapting to Light Theme\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm making progress on the light theme adaptation. My current focus is shifting the CSS variables to match the light theme design. I'm swapping the darker backgrounds for lighter ones, specifically aiming for a soft off-white for the body, white for panels and cards, and also white for the sidebar. I'm making sure that the hover and active states are updated with the corresponding color palettes.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Refining Theme Colors\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now implementing more refined color variables for the light theme. I've adjusted text colors from Slate 100/400 to Slate 900/500, respectively, and borders from Slate 700 to Slate 200. I also intend to implement more subtle shadows. For inputs, I'm switching from a dark background to a white background with a border. I am finalizing the CSS variable draft.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Optimizing for Visibility\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now revising specific component styles for the light mode. The app logo requires a gradient adjustment or simply darker text, as white won't suffice. I'm setting inputs to a white or light gray background. Glassmorphism is updated to an rgba(255, 255, 255, 0.85). The sidebar contrast is being reevaluated, while icons will utilize currentColor. Finally, the auth-overlay is under review to determine if a lighter or darker backdrop is more effective for focus.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Implementing the Light Mode\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I am now focusing on refining the specifics. The card background will be white and the auth-overlay has a dark backdrop with a white card. I'm finalizing the search panel input background to an rgba(0,0,0,0.05). The article header is being set to a sticky header with a white semi-transparent background. The logo requires a color shift, so I'm updating to a dark logo. I also need to adjust the scrollbars to be lighter, and update the meta theme-color to either #ffffff or #f8fafc.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Finalizing Visual Elements\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now zeroing in on the final visual elements for the light theme implementation. I'm setting the sidebar background to light gray and the panel-header background to rgba(255, 255, 255, 0.85). I'm confirming the auth-card uses a white background with black text. I'm finalizing the input styling with a white background, gray border, and a blue focus ring to ensure good usability. Finally, I'm ready to write the code.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Collapse to hide model thoughts\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"chevron_right\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Конечно. Вот версия с \"},{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"современной светлой темой\"},{\"type\":\"text\",\"text\":\" (Light Theme).\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Я изменил цветовую палитру на сочетание чистого белого, светло-серого (Slate) и акцентного небесно-голубого. Интерфейс стал легким, воздушным и похожим на современные инструменты вроде Notion или Apple Notes.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Основные изменения:\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Фон:\"},{\"type\":\"text\",\"text\":\" Светлый (#ffffff и #f8fafc), что улучшает читаемость при дневном свете.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Контраст:\"},{\"type\":\"text\",\"text\":\" Темно-серый текст (#0f172a) вместо белого.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Тени:\"},{\"type\":\"text\",\"text\":\" Мягкие, едва заметные тени вместо жестких границ.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Стеклянный эффект:\"},{\"type\":\"text\",\"text\":\" Заголовки теперь имеют размытый белый фон (Frosted Glass).\"}]}]}]},{\"type\":\"paragraph\"},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"app:/ai_studio_code_white.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"ai_studio_code_white.html\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"71058c07-09be-493d-b935-9642735d17e3\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Тёмная тема\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Updating the UI\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now diving deeper into the design refresh. The goal is a more modern and attractive look. The current mpage.html layout is a sidebar-main content structure, with an implied dark theme. I've begun to break down its components: auth overlays, sidebar, article lists, the editor, graph view, and various toolbars. I'll need to infer the styles used based on the class names, or override it.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Defining the Visual Refresh\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now concretizing the \\\"modern and attractive\\\" aesthetic. I've broken it down into specific design elements: a richer color palette with gradients and accents, cleaner sans-serif typography, more whitespace and rounded corners, and soft shadows with smooth transitions. I'm also considering consistent iconography, cleaner inputs, and the utility of floating action buttons. I am now planning on implementing these design changes by overriding the existing code with a comprehensive <style> block.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Implementing the Aesthetic\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now fully immersed in the coding. I've established a dark background and light text foundation, and the system UI/Inter font is in place. The sidebar is being styled with a lighter tone and a defined border. Button spacing has improved, and I am aiming for a bolder \\\"Memus\\\" logo using gradient text.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"\\\\n\\\\n\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm starting to remove the \\\"ghost\\\" look from the buttons and adding hover effects with rounded corners. I am experimenting with glassmorphism for headers and cleaning up the list items in the main content. I'm also implementing floating toolbars with shadows and rounded corners, and simplifying input styles with border removal and focus rings. I'm focusing on defining color variables and refining styles, with particular attention to the sidebar and editor area.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Refining the Implementation\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now zeroing in on the finer details, ensuring the design is pixel-perfect. I'm focusing on text styling: implementing comfortable line-height, proper SVG icon sizing and coloring. The authentication overlay is being converted into a centered card with a gradient border. The search input is being styled as a command palette. I'm carefully refining the overall CSS to inject it with a dark theme inspired by Slate/Inter. I'm adding glassmorphism to sticky headers with blur and transition effects to the buttons. Finally, I'm working on the design of custom thin scrollbars.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Integrating Design Elements\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now integrating the design elements into the code base. I'm focusing on text styling for comfortable readability, customizing SVG icon sizing and color. Authentication overlays are transforming into centered cards with gradient borders, and the search input is now a command palette. I'm injecting my styling with a Slate/Inter-inspired dark theme and applying glassmorphism to sticky headers, with blur and transition effects on buttons. I'm designing custom, thin scrollbars as the finishing touch.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Synthesizing the Styling\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"I'm now developing the overall stylesheet strategy. My plan is to use CSS variables for key colors and other design values to ensure easy theming and maintainability. I'm focusing on a clean, modern aesthetic similar to Notion's dark mode, fitting for a knowledge base application. Specifically, I'll define CSS variables, enhance typography with improved spacing and rendering, streamline the sidebar's visual presentation for clear active states, center the editor container for improved readability, and apply a modern \\\"capsule\\\" style to the toolbars. I'm prioritizing providing a comprehensive CSS replacement block within the <head> tag.\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Collapse to hide model thoughts\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"chevron_right\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Для обновления дизайна на более современный (в стиле \\\"Clean Dark UI\\\", напоминающий современные приложения вроде Linear, Notion или Raycast), я внес следующие изменения:\"}]},{\"type\":\"orderedList\",\"attrs\":{\"tight\":true,\"start\":1,\"type\":null},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Цветовая палитра:\"},{\"type\":\"text\",\"text\":\" Глубокий темно-синий/серый фон (Slate) вместо чисто черного, что снижает нагрузку на глаза.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Типографика:\"},{\"type\":\"text\",\"text\":\" Использование системных шрифтов (Inter/San Francisco) с улучшенным межстрочным интервалом и читаемостью.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"UI Элементы:\"}]},{\"type\":\"bulletList\",\"attrs\":{\"tight\":true},\"content\":[{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Скругления:\"},{\"type\":\"text\",\"text\":\" Добавлены радиусы (border-radius) для кнопок, инпутов и панелей.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Glassmorphism:\"},{\"type\":\"text\",\"text\":\" Полупрозрачные размытые фоны для панелей инструментов и заголовков.\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Тени:\"},{\"type\":\"text\",\"text\":\" Мягкие тени для создания глубины.\"}]}]}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Сайдбар:\"},{\"type\":\"text\",\"text\":\" Более четкое разделение, улучшенные ховер-эффекты (подсветка при наведении).\"}]}]},{\"type\":\"listItem\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"bold\"}],\"text\":\"Анимации:\"},{\"type\":\"text\",\"text\":\" Плавные переходы для всех интерактивных элементов.\"}]}]}]},{\"type\":\"paragraph\"},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"app:/ai_studio_code_black.html\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"ai_studio_code_black.html\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"293650ad-6e9d-4eb5-b5f7-a28ec8b603e5\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Выбор между светлой и тёмной темами\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Светлая/тёмная тема\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"3cff1e4c-c839-4124-b7f4-8947a7f5a7b6\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Сортировка быстрых заметок по дате и времени\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"На странице inbox быстрые заметки должны быть отсортированы строго по дате/времени создания. Их нельзя двигать через Alt-стрелки, нельзя делать вложенными. Блоки, относящиеся к одному дню, должны быть детьми специального служебного блока с датой.\"},{\"type\":\"hardBreak\"},{\"type\":\"hardBreak\"},{\"type\":\"text\",\"text\":\"Вообще нужно пересмотреть быстрые заметки. Почему это не реальная страница?\"}]}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"d2764a86-2528-4b9f-9069-b5608382fbc7\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\"},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"5e4288a0-c00a-42c4-ab82-3d4bb198bfea\",\"collapsed\":false},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Корректная вставка HTML в Tiptap редакторе\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Вставка форматированного текста из HTML и markdown с сохранением форматирования (найти расширение tictac)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://tiptap.dev/docs/editor/api/commands/content/insert-content-at#use-the-insertcontentat-command\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://tiptap.dev/docs/editor/api/commands/content/insert-content-at#use-the-insertcontentat-command\"}]},{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]},{\"type\":\"outlineSection\",\"attrs\":{\"id\":\"c0c25807-537e-4b07-8901-e8cf693684df\",\"collapsed\":true},\"content\":[{\"type\":\"outlineHeading\",\"content\":[{\"type\":\"text\",\"text\":\"Корректная вставка HTML в Tiptap редакторе\"}]},{\"type\":\"outlineBody\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Вставка форматированного текста из HTML и markdown с сохранением форматирования (найти расширение tictac)\"}]},{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"marks\":[{\"type\":\"link\",\"attrs\":{\"href\":\"https://tiptap.dev/docs/editor/api/commands/content/insert-content-at#use-the-insertcontentat-command\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer nofollow\",\"class\":null}}],\"text\":\"https://tiptap.dev/docs/editor/api/commands/content/insert-content-at#use-the-insertcontentat-command\"}]},{\"type\":\"paragraph\"}]},{\"type\":\"outlineChildren\"}]}]},\"createVersionIfStaleHours\":12}",
  "method": "PUT",
  "mode": "cors",
  "credentials": "include"
});