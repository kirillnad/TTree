<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Иерархические заметки</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="app-shell">
      <aside class="sidebar" id="sidebar">
        <button
          id="sidebarToggle"
          class="ghost sidebar-toggle"
          type="button"
          aria-expanded="true"
          title="Свернуть панель"
        >
          ⟨
        </button>
        <div class="hint-control">
          <button
            id="hintToggleBtn"
            class="ghost hint-toggle-btn"
            type="button"
            aria-expanded="false"
            title="Советы по навигации"
          >
            ?
          </button>
          <div id="hintPopover" class="hint-popover hidden">
            <div class="hint">
              <strong>Советы по навигации:</strong> ↑/↓ — сменить выделение, Enter — редактировать блок, Ctrl+↑/↓ — добавить соседний блок.
              <br />
              <strong>Горячие клавиши управления:</strong> Ctrl+Delete — удалить, Ctrl+Shift+↑/↓ — переместить блок в своей ветке, Ctrl+→ — сделать дочерним, Ctrl+← — поднять уровень вложенности.
              <br />
              <strong>Отмена и повтор:</strong> Ctrl+Z — вернуть последнее действие, Ctrl+Y — повторить отменённое.
              <br />
              <strong>Режим редактирования:</strong> Ctrl+Enter — сохранить изменения и выйти.
            </div>
          </div>
        </div>
        <div class="sidebar-header">
          <h1 class="app-logo">TTree</h1>
          <p class="sidebar-caption">Ваши мысли здесь</p>
        </div>

        <div class="sidebar-content">
          <div class="search-panel sidebar-section">
            <input
              id="searchInput"
              type="text"
              placeholder="Поиск по блокам..."
              autocomplete="off"
            />
            <div id="searchResults" class="search-results hidden"></div>
          </div>
          <div class="sidebar-articles sidebar-section">
            <div class="sidebar-articles__header">
              <span>Статьи</span>
              <button id="sidebarNewArticleBtn" class="ghost small" title="Создать статью">＋</button>
            </div>
            <div class="sidebar-articles__filter">
              <input id="articleFilterInput" type="text" placeholder="Фильтр по названию..." />
            </div>
            <ul id="sidebarArticleList" class="sidebar-article-list"></ul>
          </div>
          <div class="sidebar-actions">
            <button id="backToList" class="ghost full-width hidden">К списку статей</button>
            <button id="createArticleBtn" class="primary full-width">Создать статью</button>
          </div>
          <div class="sidebar-footer">
            <span id="lastChangeLabel">Последнее изменение:&nbsp;</span>
            <span id="lastChangeValue"></span>
          </div>
        </div>
      </aside>

      <main id="app" class="content">
        <section id="articleListView" class="panel">
          <div class="panel-header list-header">
            <h2>Список статей</h2>
          </div>
          <ul id="articleList"></ul>
        </section>

        <section id="articleView" class="panel hidden">
          <div class="panel-header article-header">
            <div class="title-block">
              <div class="title-row">
                <h2 id="articleTitle"></h2>
                <input id="articleTitleInput" class="hidden" type="text" />
                <button id="editTitleBtn" class="ghost small" title="Редактировать заголовок">✎</button>
                <div class="article-actions">
                  <button
                    id="articleMenuBtn"
                    class="ghost icon-button"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="article-menu"
                    title="Действия со статьёй"
                  >
                    &#8942;
                  </button>
                  <div id="articleMenu" class="article-menu hidden" role="menu">
                    <button id="deleteArticleBtn" class="menu-item danger" type="button" role="menuitem">
                      Удалить статью
                    </button>
                  </div>
                </div>
              </div>
              <p id="updatedAt" class="meta"></p>
            </div>
          </div>

          <div id="blocksContainer" class="blocks"></div>
        </section>
      </main>
    </div>

    <div id="toast" class="toast hidden"></div>
    <div id="modal-root"></div>

    <script type="module" src="/app.js"></script>
  </body>
</html>
