<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Scripta.Pro — ваша личная база знаний.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/boxicons/boxicons.css" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="manifest" href="/manifest.webmanifest" />
    <link rel="icon" href="/icons/favicon.ico" type="image/x-icon" />
    <meta name="theme-color" content="#f8fafc" />
    <!-- iOS Safari PWA meta -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Skripta.Pro" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
  </head>
  <body>
    <div id="authOverlay" class="auth-overlay">
      <div class="auth-card">
        <img class="auth-logo" src="/icons/logo_start.webp" alt="Scripta.pro" />
        <p id="authSubtitle" class="auth-subtitle">Загружаем базу знаний…</p>
        <!-- <button id="authGoogleLoginBtn" type="button" class="auth-submit auth-google-btn hidden">
          <span class="auth-google-icon" aria-hidden="true">
            <svg
              viewBox="0.99 0.99 18.01 18.01"
              class="google"
              width="16"
              height="16"
            >
              <g clip-path="url(#clip0_2234_44729)">
                <path
                  fill="#4285F4"
                  d="M18.64 10.205q-.002-.958-.164-1.841H10v3.481h4.844a4.14 4.14 0 0 1-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615"
                ></path>
                <path
                  fill="#34A853"
                  d="M10 19c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H1.957v2.332A9 9 0 0 0 10 19"
                ></path>
                <path
                  fill="#FBBC04"
                  d="M4.964 11.71A5.4 5.4 0 0 1 4.682 10c0-.593.102-1.17.282-1.71V5.958H1.957A9 9 0 0 0 1 10c0 1.452.348 2.827.957 4.042z"
                ></path>
                <path
                  fill="#E94235"
                  d="M10 4.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C14.463 1.891 12.426.999 10 .999a9 9 0 0 0-8.043 4.958L4.964 8.29C5.672 6.163 7.656 4.58 10 4.58"
                ></path>
              </g>
              <defs>
                <clipPath id="clip0_2234_44729">
                  <path fill="#fff" d="M1 1h18v18H1z"></path>
                </clipPath>
              </defs>
            </svg>
          </span>
          <span class="auth-google-label">Войти через Google</span>
        </button> -->
        <button id="authYandexLoginBtn" type="button" class="auth-submit auth-yandex-btn hidden">
          <span class="auth-yandex-icon" aria-hidden="true">
            Я
          </span>
          <span class="auth-yandex-label">Войти через Яндекс</span>
        </button>
        <p id="authStorageInfo" class="auth-storage-info hidden">
          Уведомление о безопасности: Тексты и картинки хранятся на серверах Memus.pro, иные загруженные файлы сохраняются напрямую на ваш Яндекс.Диск. Вы можете зашифровать приватные данные.
        </p>
        <p id="authError" class="auth-error hidden" aria-live="polite"></p>
      </div>
    </div>
    <div class="app-shell">
      <aside class="sidebar" id="sidebar">
        <button
          id="sidebarToggle"
          class="ghost sidebar-toggle"
          type="button"
          aria-expanded="true"
          title="Свернуть панель"
        >
          x
        </button>
        <div class="hint-control">
          <button
            id="hintToggleBtn"
            class="ghost hint-toggle-btn"
            type="button"
            aria-expanded="false"
            title="Советы по навигации"
          >
            ?
          </button>
          <div id="hintPopover" class="hint-popover hidden">
            <div class="hint">
              <strong>Советы по навигации:</strong> ↑/↓ — сменить выделение, Enter — редактировать блок, Ctrl+↑/↓ — добавить соседний блок.
              <br />
              <strong>Горячие клавиши управления:</strong> Ctrl+Delete — удалить, Ctrl+Shift+↑/↓ — переместить блок в своей ветке, Ctrl+→ — сделать дочерним, Ctrl+← — поднять уровень вложенности.
              <br />
              <strong>Отмена и повтор:</strong> Ctrl+Z — вернуть последнее действие, Ctrl+Y — повторить отменённое.
              <br />
              <strong>Режим редактирования:</strong> Ctrl+Enter или Tab — сохранить изменения и выйти.
            </div>
          </div>
        </div>
        <div class="sidebar-header">
          <h2 class="app-logo">
            <span class="app-logo__brand">Scripta</span><span class="app-logo__tld">.pro</span>
          </h2>
          <p class="sidebar-caption">Ваши мысли здесь</p>
        </div>

        <div class="sidebar-content">
          <div class="quick-notes-row">
            <button id="openInboxBtn" class="ghost small" type="button" title="Открыть быстрые заметки">Быстрые заметки</button>
            <button id="quickNoteAddBtn" class="ghost small" type="button" title="Добавить быструю заметку">Новая</button>
          </div>
	          <div class="search-panel sidebar-section">
	            <div class="search-panel__row">
	              <button
	                id="sidebarSearchViewToggle"
	                class="search-panel__toggle search-panel__toggle--view"
	                type="button"
	                title="Режим: фильтр списка статей"
	                aria-label="Режим: фильтр списка статей"
	                data-view="list"
	              >
	                <span>Поиск</span>
	              </button>

                <div class="search-panel__input-wrap">
	                <input
	                  id="searchInput"
	                  type="text"
	                  placeholder="Поиск..."
	                  autocomplete="off"
	                />
	                <button
	                  id="searchClearBtn"
	                  class="search-panel__clear hidden"
	                  type="button"
	                  title="Очистить поиск"
	                  aria-label="Очистить поиск"
	                >
	                  ×
	                </button>
	              </div>
	              <button
	                id="ragOpenBtn"
	                class="search-panel__toggle hidden"
	                type="button"
	                title="Открыть страницу с резюме и найденными блоками"
                aria-label="Открыть RAG страницу"
              >
                <span>R</span>
              </button>
              <button
                id="searchModeToggle"
                class="search-panel__toggle"
                type="button"
                title="Переключиться на семантический поиск"
                aria-label="Переключить режим поиска"
                data-mode="classic"
              >
                <span>Ai</span>
              </button>
            </div>
            <div id="searchResults" class="search-results hidden"></div>
          </div>
            <div class="sidebar-articles sidebar-section">
              <div class="sidebar-articles__header">
                <div class="sidebar-articles__header-left">
                  <button id="backToList" class="ghost small" type="button" title="Открыть список всех статей">Статьи</button>
                  <button id="sidebarRecentBtn" class="ghost small" type="button" title="Показать последние открытые статьи">Последние</button>
                </div>
                <div class="sidebar-articles__header-right">
                  <button
                    id="graphToggleBtn"
                    class="ghost small sidebar-graph-btn"
                    type="button"
                    title="Граф страниц"
                    aria-label="Граф страниц"
                  >
                    <i class="bx bx-network-chart" aria-hidden="true"></i>
                  </button>
                  <button id="sidebarNewArticleBtn" class="ghost small" title="Создать статью">Создать</button>
                </div>
              </div>
              <ul id="sidebarArticleList" class="sidebar-article-list"></ul>
            </div>
		          <div class="sidebar-footer">
		            <button
		              id="userMenuBtn"
		              class="ghost icon-button sidebar-user-avatar"
	              type="button"
              aria-haspopup="true"
              aria-expanded="false"
              aria-controls="user-menu"
              title="Аккаунт"
	              >
	              <svg
	                class="sidebar-user-avatar__icon"
	                viewBox="0 0 24 24"
	                xmlns="http://www.w3.org/2000/svg"
	                width="18"
	                height="18"
	                aria-hidden="true"
	              >
	                <circle cx="12" cy="8" r="4" fill="currentColor" />
	                <path
	                  d="M4 18c0-3 3-5 8-5s8 2 8 5"
	                  fill="none"
	                  stroke="currentColor"
	                  stroke-width="1.6"
	                  stroke-linecap="round"
	                />
		              </svg>
			            </button>
	              <button
	                id="sidebarSyncStatusPill"
	                class="sidebar-sync-status"
	                type="button"
	                aria-haspopup="true"
	                aria-expanded="false"
	                aria-controls="syncMenu"
	                title="Статус соединения и синхронизации"
	              >
	                …
	              </button>
		            <span class="sidebar-version" id="sidebarVersionLabel">v …</span>
			              <div id="syncMenu" class="article-menu hidden sidebar-sync-menu" role="menu">
				              <div class="sidebar-user-menu__item" aria-disabled="true">
				                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-wifi"></i></span>
				                <span class="sidebar-user-menu-label" id="syncMenuStatusLabel">Статус: —</span>
				              </div>
				              <div class="sidebar-user-menu__item" aria-disabled="true">
				                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-list-ul"></i></span>
				                <span class="sidebar-user-menu-label" id="syncMenuArticlesLabel">Статьи: —</span>
				              </div>
				              <div class="sidebar-user-menu__item" aria-disabled="true">
				                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-layer"></i></span>
				                <span class="sidebar-user-menu-label" id="syncMenuOutboxLabel">Очередь: —</span>
				              </div>
			              <div id="offlineStatusItem" class="sidebar-user-menu__item" aria-disabled="true">
			                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-cloud-download"></i></span>
			                <span class="sidebar-user-menu-label" id="offlineStatusLabel">Оффлайн: —</span>
			              </div>
				              <button id="offlineFetchBtn" class="menu-item hidden" type="button" role="menuitem">
				                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-cloud-download"></i></span>
				                <span class="sidebar-user-menu-label">Докачать сейчас</span>
				              </button>
				              <button id="offlineRepairBtn" class="menu-item hidden" type="button" role="menuitem">
				                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-refresh"></i></span>
				                <span class="sidebar-user-menu-label">Перезагрузить</span>
				              </button>
				            </div>
		            <div id="userMenu" class="article-menu hidden sidebar-user-menu" role="menu">
		              <div class="sidebar-user-menu__item" aria-disabled="true">
		                <span class="sidebar-user-menu-icon sidebar-user-menu-icon--user" aria-hidden="true">
		                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="16" height="16">
                    <circle cx="12" cy="8" r="4" fill="currentColor" />
                    <path d="M4 18c0-3 3-5 8-5s8 2 8 5" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
                  </svg>
	                </span>
	                <span class="sidebar-user-menu__name" id="currentUserLabel"></span>
		              </div>
		              <button id="openUsersViewBtn" class="menu-item" type="button" role="menuitem">
		                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-group"></i></span>
	                <span class="sidebar-user-menu-label">Пользователи</span>
	              </button>
	              <button id="telegramLinkBtn" class="menu-item" type="button" role="menuitem">
	                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bxl-telegram"></i></span>
	                <span class="sidebar-user-menu-label">Привязать Telegram</span>
	              </button>
	              <button id="telegramBotOpenBtn" class="menu-item" type="button" role="menuitem">
	                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-bot"></i></span>
	                <span class="sidebar-user-menu-label">Бот быстрых заметок</span>
	              </button>
	              <button id="telegramFeedbackBotOpenBtn" class="menu-item" type="button" role="menuitem">
	                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-message-square-dots"></i></span>
	                <span class="sidebar-user-menu-label">Обратная связь</span>
	              </button>
	              <button id="semanticReindexBtn" class="menu-item" type="button" role="menuitem">
	                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-revision"></i></span>
	                <span class="sidebar-user-menu-label">Переиндексировать поиск</span>
	              </button>
	              <button id="logoutBtn" class="menu-item" type="button" role="menuitem">
	                <span class="sidebar-user-menu-icon" aria-hidden="true"><i class="bx bx-log-out"></i></span>
	                <span class="sidebar-user-menu-label">Выйти</span>
	              </button>
            </div>
          </div>
        </div>
      </aside>

      <main id="app" class="content">
        <section id="articleListView" class="panel">
          <div class="panel-header list-header">
            <button
              id="listSidebarBtn"
              class="ghost icon-button mobile-only"
              type="button"
              title="Открыть боковую панель"
              aria-label="Открыть боковую панель"
	            >
	              <i class="bx bx-menu" aria-hidden="true"></i>
	            </button>
            <h2>Список статей</h2>
            <div class="list-tabs">
              <button id="articlesTabBtn" class="ghost small active" type="button" aria-pressed="true">Статьи</button>
              <button id="trashTabBtn" class="ghost small" type="button" aria-pressed="false">Корзина</button>
            </div>
            <div class="list-header-actions">
              <button
	                id="listMenuBtn"
	                class="ghost icon-button"
                type="button"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="list-menu"
                title="Импорт статей"
	              >
	                <i class="bx bx-dots-vertical-rounded" aria-hidden="true"></i>
	              </button>
              <div id="listMenu" class="article-menu hidden" role="menu">
                <button id="exportAllHtmlZipBtn" class="menu-item" type="button" role="menuitem">
                  Резервная копия (ZIP)
                </button>
                <button id="importArticleBtn" class="menu-item" type="button" role="menuitem">
                  Импорт из HTML
                </button>
                <button id="importBackupFolderBtn" class="menu-item" type="button" role="menuitem">
                  Импорт из резервной копии (папка)
                </button>
                <button id="importMarkdownBtn" class="menu-item" type="button" role="menuitem">
                  Импорт из Markdown
                </button>
                <button id="importLogseqBtn" class="menu-item" type="button" role="menuitem">
                  Импорт из Obsidian/Logseq
                </button>
              </div>
            </div>
          </div>
          <ul id="articleList"></ul>
        </section>

        <div id="articleHeader" class="panel-header article-header hidden">
          <div class="title-block">
                <div class="title-row">
		                  <button id="mobileSidebarBtn" class="ghost icon-button mobile-only" type="button" title="Открыть список статей" aria-label="Открыть список статей"><i class="bx bx-menu" aria-hidden="true"></i></button>
                  <h2 id="articleTitle"></h2>
                  <input id="articleTitleInput" class="hidden" type="text" />
                  <button
                    id="articleFavoriteBtn"
                    class="ghost icon-button small"
                    type="button"
                    title="Добавить в избранное"
                    aria-label="Добавить в избранное"
	                  >
	                    <i class="bx bx-star" aria-hidden="true"></i>
	                  </button>
                  <button
                    id="articlePublicLinkBtn"
                    class="ghost icon-button small public-link-button"
                    type="button"
                    title="Скопировать публичную ссылку"
                    aria-label="Скопировать публичную ссылку"
	                  >
	                    <i class="bx bx-link-external" aria-hidden="true"></i>
	                  </button>
                  <div class="article-actions">
                    <button
                     id="articleMenuBtn"
                      class="ghost icon-button"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="article-menu"
                    title="Действия со статьёй"
	                  >
	                    <i class="bx bx-dots-horizontal-rounded" aria-hidden="true"></i>
	                  </button>
                  <div id="articleMenu" class="article-menu hidden" role="menu">
                    <p id="updatedAt" class="meta article-menu-meta"></p>
                    <button id="articlePublicToggleBtn" class="menu-item" type="button" role="menuitem">
                      Дать доступ по ссылке
                    </button>
                    <button id="exportArticleBtn" class="menu-item" type="button" role="menuitem">
                      Экспорт в HTML
                    </button>
                    <button id="saveVersionBtn" class="menu-item" type="button" role="menuitem">
                      Сохранить версию
                    </button>
                    <button id="versionsBtn" class="menu-item" type="button" role="menuitem">
                      Версии…
                    </button>
                    <button id="blockHistoryBtn" class="menu-item" type="button" role="menuitem">
                      История блока…
                    </button>
                    <button id="articleHistoryBtn" class="menu-item" type="button" role="menuitem">
                      История статьи…
                    </button>
                    <button id="articleEncryptionBtn" class="menu-item" type="button" role="menuitem">
                      Зашифровать
                    </button>
                    <button id="articleEncryptionRemoveBtn" class="menu-item" type="button" role="menuitem">
                      Снять защиту
                    </button>
	                  <button id="deleteArticleBtn" class="menu-item danger" type="button" role="menuitem">
	                      Удалить статью
	                  </button>
	                </div>
	              </div>
	            </div>
	            <div id="articleToolbar" class="article-toolbar">
		              <button id="articleUndoBtn" class="ghost small" type="button" title="Отменить действие (Ctrl+Z)">
		                <i class="bx bx-undo" aria-hidden="true"></i><span class="toolbar-label"> Отменить</span>
	                </button>
	                <button id="articleRedoBtn" class="ghost small" type="button" title="Повторить действие (Ctrl+Y)">
	                  <i class="bx bx-redo" aria-hidden="true"></i><span class="toolbar-label"> Повторить</span>
	                </button>
                <button
                  id="dragModeToggleBtn"
                  class="ghost small drag-mode-toggle-btn"
                  type="button"
                  aria-pressed="false"
                  title="Переключить режим перетаскивания блоков"
	                >
	                  <i class="bx bx-move" aria-hidden="true"></i><span class="toolbar-label"> Двигать</span>
	                </button>
	                <button id="mergeBlocksBtn" class="ghost small" type="button" title="Объединить выбранные блоки в один">
	                  <i class="bx bx-merge" aria-hidden="true"></i><span class="toolbar-label"> Слияние</span>
	                </button>
                <button
                  id="splitBlockBtn"
                  class="ghost small"
                  type="button"
                  title="Разделить текущий блок по курсору (Ctrl+↓)"
	                >
	                  <i class="bx bx-cut" aria-hidden="true"></i><span class="toolbar-label"> Разделить</span>
	                </button>
	                <button id="insertTableBtn" class="ghost small" type="button" title="Вставить таблицу 2×2">
	                  <i class="bx bx-table" aria-hidden="true"></i><span class="toolbar-label"> Таблица</span>
	                </button>
	                <button id="exportCurrentBlockBtn" class="ghost small" type="button" title="Экспорт текущего блока в HTML">
	                  <i class="bx bx-export" aria-hidden="true"></i><span class="toolbar-label"> Экспорт</span>
	                </button>
	                <button id="deleteCurrentBlockBtn" class="ghost small" type="button" title="Удалить текущий блок">
	                  <i class="bx bx-trash" aria-hidden="true"></i><span class="toolbar-label"> Удалить</span>
	                </button>
	                <button id="articleBlockTrashBtn" class="ghost small" type="button" title="Корзина удалённых блоков">
	                  <i class="bx bx-trash-alt" aria-hidden="true"></i><span class="toolbar-label"> Корзина</span>
	                </button>
	                <button id="articleNewBlockBtn" class="ghost small" type="button" title="Создать блок ниже текущего">
	                  <i class="bx bx-plus" aria-hidden="true"></i><span class="toolbar-label"> Новый</span>
	                </button>
              </div>
              <div id="outlineToolbar" class="outline-toolbar hidden">
	                <button id="outlineUndoBtn" class="ghost small" type="button" title="Отменить (Ctrl+Z)">
	                  <i class="bx bx-undo" aria-hidden="true"></i><span class="toolbar-label"> Отменить</span>
	                </button>
	                <button id="outlineRedoBtn" class="ghost small" type="button" title="Повторить (Ctrl+Y)">
	                  <i class="bx bx-redo" aria-hidden="true"></i><span class="toolbar-label"> Повторить</span>
	                </button>
	                <button id="outlineAttachBtn" class="ghost small outline-toolbar__editbtn" type="button" title="Вложение" hidden>
	                  <i class="bx bx-paperclip" aria-hidden="true"></i><span class="toolbar-label"> Вложение</span>
	                </button>
                <input id="outlineAttachInput" class="hidden" type="file" multiple />
	                <button id="outlineDeleteBtn" class="ghost small outline-toolbar__viewbtn" type="button" title="Удалить блок (в корзину)" hidden>
	                  <i class="bx bx-trash" aria-hidden="true"></i><span class="toolbar-label"> Удалить</span>
	                </button>
	                <button id="outlineMoveUpBtn" class="ghost small outline-toolbar__viewbtn" type="button" title="Переместить блок вверх (Alt+↑)" hidden>
	                  <span class="outline-toolbar__arrow"><i class="bx bx-up-arrow-alt" aria-hidden="true"></i></span><span class="toolbar-label"> Вверх</span>
	                </button>
	                <button id="outlineMoveDownBtn" class="ghost small outline-toolbar__viewbtn" type="button" title="Переместить блок вниз (Alt+↓)" hidden>
	                  <span class="outline-toolbar__arrow"><i class="bx bx-down-arrow-alt" aria-hidden="true"></i></span><span class="toolbar-label"> Вниз</span>
	                </button>
	                <button id="outlineOutdentBtn" class="ghost small outline-toolbar__viewbtn" type="button" title="Сдвиг влево (Alt+←)" hidden>
	                  <span class="outline-toolbar__arrow"><i class="bx bx-left-arrow-alt" aria-hidden="true"></i></span><span class="toolbar-label"> Влево</span>
	                </button>
	                <button id="outlineIndentBtn" class="ghost small outline-toolbar__viewbtn" type="button" title="Сдвиг вправо (Alt+→)" hidden>
	                  <span class="outline-toolbar__arrow"><i class="bx bx-right-arrow-alt" aria-hidden="true"></i></span><span class="toolbar-label"> Вправо</span>
	                </button>
	                <div class="outline-toolbar__dropdown outline-toolbar__dropdown--view">
	                  <button
	                    id="outlineBlocksMenuBtn"
	                    class="ghost small outline-toolbar__dropdown-btn"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="outlineBlocksMenu"
                    title="Блоки"
	                  >
	                    <i class="bx bx-server" aria-hidden="true"></i><span class="toolbar-label"> Блоки</span>
	                  </button>
	                  <div id="outlineBlocksMenu" class="outline-toolbar__menu hidden" role="menu">
	                    <button class="menu-item" type="button" role="menuitem" data-outline-clipboard-action="toggleSelectMode">
	                      <span class="outline-menu__icon"><i class="bx bx-select-multiple" aria-hidden="true"></i></span><span class="outline-menu__label">Выбрать блоки</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-clipboard-action="copy">
	                      <span class="outline-menu__icon"><i class="bx bx-copy" aria-hidden="true"></i></span><span class="outline-menu__label">Копировать</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-clipboard-action="cut">
	                      <span class="outline-menu__icon"><i class="bx bx-cut" aria-hidden="true"></i></span><span class="outline-menu__label">Вырезать</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-clipboard-action="paste">
	                      <span class="outline-menu__icon"><i class="bx bx-paste" aria-hidden="true"></i></span><span class="outline-menu__label">Вставить</span>
	                    </button>
		                    <button class="menu-item" type="button" role="menuitem" data-outline-clipboard-action="clear">
		                      <span class="outline-menu__icon"><i class="bx bx-eraser" aria-hidden="true"></i></span><span class="outline-menu__label">Очистить буфер</span>
		                    </button>
	                    <div class="outline-menu__divider" role="separator"></div>
		                    <button class="menu-item" type="button" role="menuitem" data-outline-action="collapseAllBlocks">
		                      <span class="outline-menu__icon"><i class="bx bx-collapse-alt" aria-hidden="true"></i></span><span class="outline-menu__label">Свернуть всё</span>
		                    </button>
		                    <button class="menu-item" type="button" role="menuitem" data-outline-action="expandAllBlocks">
		                      <span class="outline-menu__icon"><i class="bx bx-expand-alt" aria-hidden="true"></i></span><span class="outline-menu__label">Развернуть всё</span>
		                    </button>
	                  </div>
	                </div>
	                <div class="outline-toolbar__dropdown">
	                  <button
	                    id="outlineTextMenuBtn"
	                    class="ghost small outline-toolbar__dropdown-btn"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="outlineTextMenu"
                    title="Текст"
	                  >
	                    <i class="bx bx-font" aria-hidden="true"></i><span class="toolbar-label"> Текст</span>
	                  </button>
                  <div id="outlineTextMenu" class="outline-toolbar__menu hidden" role="menu">
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleBold">
                      <span class="outline-menu__icon"><strong>Ж</strong></span><span class="outline-menu__label">Жирный</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleItalic">
                      <span class="outline-menu__icon"><em>/</em></span><span class="outline-menu__label">Курсив</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleStrike">
                      <span class="outline-menu__icon"><s>З</s></span><span class="outline-menu__label">Зачёркнутый</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleCodeBlock">
                      <span class="outline-menu__icon">&lt;/&gt;</span><span class="outline-menu__label">Код</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleBlockquote">
                      <span class="outline-menu__icon">❝</span><span class="outline-menu__label">Цитата</span>
                    </button>
                    <div class="outline-menu__divider" role="separator"></div>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="insertHttpLink">
	                      <span class="outline-menu__icon"><i class="bx bx-link" aria-hidden="true"></i></span><span class="outline-menu__label">Ссылка (URL)</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="insertArticleLink">
	                      <span class="outline-menu__icon"><i class="bx bx-link-alt" aria-hidden="true"></i></span><span class="outline-menu__label">Ссылка на статью</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="unsetLink">
	                      <span class="outline-menu__icon"><i class="bx bx-unlink" aria-hidden="true"></i></span><span class="outline-menu__label">Убрать ссылку</span>
	                    </button>
	                  </div>
	                </div>

	                <div class="outline-toolbar__dropdown">
	                  <button
	                    id="outlineCalloutMenuBtn"
	                    class="ghost small outline-toolbar__dropdown-btn"
	                    type="button"
	                    aria-haspopup="true"
	                    aria-expanded="false"
	                    aria-controls="outlineCalloutMenu"
	                    title="Callout"
	                  >
	                    <i class="bx bx-message-square-detail" aria-hidden="true"></i><span class="toolbar-label"> Callout</span>
	                  </button>
	                  <div id="outlineCalloutMenu" class="outline-toolbar__menu hidden" role="menu">
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="setCallout:note">
	                      <span class="outline-menu__icon"><i class="bx bx-notepad" aria-hidden="true"></i></span><span class="outline-menu__label">Note</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="setCallout:info">
	                      <span class="outline-menu__icon"><i class="bx bx-info-circle" aria-hidden="true"></i></span><span class="outline-menu__label">Info</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="setCallout:success">
	                      <span class="outline-menu__icon"><i class="bx bx-check-circle" aria-hidden="true"></i></span><span class="outline-menu__label">Success</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="setCallout:warning">
	                      <span class="outline-menu__icon"><i class="bx bx-error-circle" aria-hidden="true"></i></span><span class="outline-menu__label">Warning</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="setCallout:danger">
	                      <span class="outline-menu__icon"><i class="bx bx-x-circle" aria-hidden="true"></i></span><span class="outline-menu__label">Danger</span>
	                    </button>
	                    <div class="outline-menu__divider" role="separator"></div>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="unsetCallout">
	                      <span class="outline-menu__icon"><i class="bx bx-x" aria-hidden="true"></i></span><span class="outline-menu__label">Убрать callout</span>
	                    </button>
	                  </div>
	                </div>

	                <div class="outline-toolbar__dropdown">
	                  <button
	                    id="outlineListsMenuBtn"
	                    class="ghost small outline-toolbar__dropdown-btn"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="outlineListsMenu"
                    title="Списки"
	                  >
	                    <i class="bx bx-list-ul" aria-hidden="true"></i><span class="toolbar-label"> Списки</span>
	                  </button>
	                  <div id="outlineListsMenu" class="outline-toolbar__menu hidden" role="menu">
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleBulletList">
	                      <span class="outline-menu__icon"><i class="bx bx-list-ul" aria-hidden="true"></i></span><span class="outline-menu__label">Маркированный</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleOrderedList">
	                      <span class="outline-menu__icon"><i class="bx bx-list-ol" aria-hidden="true"></i></span><span class="outline-menu__label">Нумерованный</span>
	                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="unsetList">
	                      <span class="outline-menu__icon"><i class="bx bx-x" aria-hidden="true"></i></span><span class="outline-menu__label">Отменить</span>
	                    </button>
	                  </div>
	                </div>

                <div class="outline-toolbar__dropdown">
                  <button
                    id="outlineTableMenuBtn"
                    class="ghost small outline-toolbar__dropdown-btn"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="outlineTableMenu"
                    title="Таблица"
	                  >
	                    <i class="bx bx-table" aria-hidden="true"></i><span class="toolbar-label"> Таблица</span>
	                  </button>
			                  <div id="outlineTableMenu" class="outline-toolbar__menu hidden" role="menu">
		                      <button class="menu-item" type="button" role="menuitem" data-outline-action="insertTable">
		                        <span class="outline-menu__icon"><i class="bx bx-table" aria-hidden="true"></i></span><span class="outline-menu__label">Вставить таблицу 2×2</span>
		                      </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleHeaderRow">
                      <span class="outline-menu__icon">H↔</span><span class="outline-menu__label">Header row</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="toggleHeaderColumn">
                      <span class="outline-menu__icon">H↕</span><span class="outline-menu__label">Header column</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="addRowBefore">
                      <span class="outline-menu__icon">+R↑</span><span class="outline-menu__label">Строка (до)</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="addRowAfter">
                      <span class="outline-menu__icon">+R</span><span class="outline-menu__label">Строка (после)</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="deleteRow">
                      <span class="outline-menu__icon">−R</span><span class="outline-menu__label">Удалить строку</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="addColumnBefore">
                      <span class="outline-menu__icon">+C←</span><span class="outline-menu__label">Столбец (до)</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="addColumnAfter">
                      <span class="outline-menu__icon">+C</span><span class="outline-menu__label">Столбец (после)</span>
                    </button>
                    <button class="menu-item" type="button" role="menuitem" data-outline-action="deleteColumn">
                      <span class="outline-menu__icon">−C</span><span class="outline-menu__label">Удалить столбец</span>
                    </button>
	                    <button class="menu-item" type="button" role="menuitem" data-outline-action="mergeCells">
	                      <span class="outline-menu__icon"><i class="bx bx-merge" aria-hidden="true"></i></span><span class="outline-menu__label">Объединить ячейки</span>
	                    </button>
		                    <button class="menu-item" type="button" role="menuitem" data-outline-action="splitCell">
		                      <span class="outline-menu__icon"><i class="bx bx-border-inner" aria-hidden="true"></i></span><span class="outline-menu__label">Отменить объединение</span>
		                    </button>
		                    <button class="menu-item" type="button" role="menuitem" data-outline-action="cancelTable">
		                      <span class="outline-menu__icon"><i class="bx bx-reply" aria-hidden="true"></i></span><span class="outline-menu__label">Отменить таблицу (в текст)</span>
		                    </button>
		                    <button class="menu-item" type="button" role="menuitem" data-outline-action="deleteTable">
		                      <span class="outline-menu__icon"><i class="bx bx-trash" aria-hidden="true"></i></span><span class="outline-menu__label">Удалить таблицу</span>
		                    </button>
		                  </div>
		                </div>

		                <button id="outlineNewBelowBtn" class="ghost small outline-toolbar__viewbtn" type="button" title="Новый блок ниже" hidden>
		                  <i class="bx bx-plus" aria-hidden="true"></i><span class="toolbar-label"> Новый</span>
		                </button>
	              </div>
	            </div>
          <div id="pasteProgress" class="inline-progress hidden" role="status" aria-live="polite">
            <span class="inline-progress__spinner" aria-hidden="true"></span>
            <span class="inline-progress__text">Вставляем Markdown...</span>
          </div>
        </div>

        <section id="articleView" class="panel hidden">
          <div id="outlineTagsBar" class="outline-tags-panel hidden" aria-label="Теги статьи"></div>
          <div id="outlineEditor" class="outline-editor hidden"></div>
          <div id="blocksContainer" class="blocks"></div>
        </section>

        <section id="usersView" class="panel hidden">
          <div class="panel-header">
            <h2>Пользователи</h2>
            <button id="usersBackBtn" class="ghost small" type="button">Назад</button>
          </div>
          <ul id="usersList" class="users-list"></ul>
        </section>

        <section id="graphView" class="panel hidden">
          <div class="panel-header">
            <h2>Граф страниц</h2>
            <button id="graphBackBtn" class="ghost small" type="button">Назад</button>
          </div>
          <div class="graph-container">
            <div id="graphCanvas"></div>
          </div>
        </section>
      </main>
    </div>

    <div id="toast" class="toast hidden"></div>
    <div id="modal-root"></div>
    <div id="sidebarBackdrop" class="sidebar-backdrop hidden"></div>

    <script>
      window.__memusAppModule = "/app.js";
    </script>
    <script type="module" src="/boot.js"></script>
  </body>
</html>
