<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>–ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—Ç–∫–∏</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div id="authOverlay" class="auth-overlay">
      <div class="auth-card">
        <h1 class="auth-title">Memus.pro</h1>
        <p class="auth-subtitle">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏</p>
        <div class="auth-tabs">
          <button id="authLoginTab" class="auth-tab active" type="button">–í—Ö–æ–¥</button>
          <button id="authRegisterTab" class="auth-tab" type="button">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>
        <form id="authLoginForm" class="auth-form hidden">
          <label class="auth-field">
            <span>–õ–æ–≥–∏–Ω</span>
            <input id="authLoginUsername" type="text" autocomplete="username" />
          </label>
          <label class="auth-field">
            <span>–ü–∞—Ä–æ–ª—å</span>
            <input id="authLoginPassword" type="password" autocomplete="current-password" />
          </label>
          <button type="submit" class="primary auth-submit">–í–æ–π—Ç–∏</button>
        </form>
        <form id="authRegisterForm" class="auth-form hidden">
          <label class="auth-field">
            <span>–õ–æ–≥–∏–Ω</span>
            <input id="authRegisterUsername" type="text" autocomplete="username" />
          </label>
          <label class="auth-field">
            <span>–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è</span>
            <input id="authRegisterDisplayName" type="text" autocomplete="name" />
          </label>
          <label class="auth-field">
            <span>–ü–∞—Ä–æ–ª—å</span>
            <input id="authRegisterPassword" type="password" autocomplete="new-password" />
          </label>
          <button type="submit" class="primary auth-submit">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
        </form>
        <p id="authError" class="auth-error hidden" aria-live="polite"></p>
      </div>
    </div>
    <div class="app-shell">
      <aside class="sidebar" id="sidebar">
        <button
          id="sidebarToggle"
          class="ghost sidebar-toggle"
          type="button"
          aria-expanded="true"
          title="–°–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å"
        >
          x
        </button>
        <div class="hint-control">
          <button
            id="hintToggleBtn"
            class="ghost hint-toggle-btn"
            type="button"
            aria-expanded="false"
            title="–°–æ–≤–µ—Ç—ã –ø–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏"
          >
            ?
          </button>
          <div id="hintPopover" class="hint-popover hidden">
            <div class="hint">
              <strong>–°–æ–≤–µ—Ç—ã –ø–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:</strong> ‚Üë/‚Üì ‚Äî —Å–º–µ–Ω–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ, Enter ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫, Ctrl+‚Üë/‚Üì ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–æ—Å–µ–¥–Ω–∏–π –±–ª–æ–∫.
              <br />
              <strong>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</strong> Ctrl+Delete ‚Äî —É–¥–∞–ª–∏—Ç—å, Ctrl+Shift+‚Üë/‚Üì ‚Äî –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –±–ª–æ–∫ –≤ —Å–≤–æ–µ–π –≤–µ—Ç–∫–µ, Ctrl+‚Üí ‚Äî —Å–¥–µ–ª–∞—Ç—å –¥–æ—á–µ—Ä–Ω–∏–º, Ctrl+‚Üê ‚Äî –ø–æ–¥–Ω—è—Ç—å —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏.
              <br />
              <strong>–û—Ç–º–µ–Ω–∞ –∏ –ø–æ–≤—Ç–æ—Ä:</strong> Ctrl+Z ‚Äî –≤–µ—Ä–Ω—É—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ, Ctrl+Y ‚Äî –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ—Ç–º–µ–Ω—ë–Ω–Ω–æ–µ.
              <br />
              <strong>–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong> Ctrl+Enter ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤—ã–π—Ç–∏.
            </div>
          </div>
        </div>
        <div class="sidebar-header">
          <h1 class="app-logo">Memus</h1>
          <p class="sidebar-caption">–í–∞—à–∏ –º—ã—Å–ª–∏ –∑–¥–µ—Å—å</p>
        </div>

        <div class="sidebar-content">
          <div class="quick-notes-row">
            <button id="openInboxBtn" class="ghost small" type="button" title="–û—Ç–∫—Ä—ã—Ç—å –±—ã—Å—Ç—Ä—ã–µ –∑–∞–º–µ—Ç–∫–∏">–ë—ã—Å—Ç—Ä—ã–µ –∑–∞–º–µ—Ç–∫–∏</button>
            <button id="quickNoteAddBtn" class="ghost small" type="button" title="–î–æ–±–∞–≤–∏—Ç—å –±—ã—Å—Ç—Ä—É—é –∑–∞–º–µ—Ç–∫—É">–ù–æ–≤–∞—è</button>
          </div>
          <div class="search-panel sidebar-section">
            <input
              id="searchInput"
              type="text"
              placeholder="–ü–æ–∏—Å–∫..."
              autocomplete="off"
            />
            <div id="searchResults" class="search-results hidden"></div>
          </div>
            <div class="sidebar-articles sidebar-section">
              <div class="sidebar-articles__header">
                <button id="backToList" class="ghost small" type="button" title="–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π">–í—Å–µ —Å—Ç–∞—Ç—å–∏</button>
                <button id="sidebarNewArticleBtn" class="ghost small" title="–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é">–°–æ–∑–¥–∞—Ç—å</button>
              </div>
              <ul id="sidebarArticleList" class="sidebar-article-list"></ul>
            </div>
          <div class="sidebar-actions">
            <button
              id="usersBtn"
              class="ghost small hidden"
              type="button"
              title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"
            >
              –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            </button>
          </div>
          <div class="sidebar-footer">
            <span id="lastChangeLabel">–ü–æ—Å–ª–µ–¥–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:&nbsp;</span>
            <span id="lastChangeValue"></span>
            <div class="sidebar-user">
              <span id="currentUserLabel" class="sidebar-user__name"></span>
              <button id="logoutBtn" class="ghost small sidebar-user__logout" type="button">–í—ã–π—Ç–∏</button>
            </div>
          </div>
        </div>
      </aside>

      <main id="app" class="content">
        <section id="articleListView" class="panel">
          <div class="panel-header list-header">
            <button
              id="listSidebarBtn"
              class="ghost icon-button mobile-only"
              type="button"
              title="–û—Ç–∫—Ä—ã—Ç—å –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å"
              aria-label="–û—Ç–∫—Ä—ã—Ç—å –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å"
            >
              ‚ò∞
            </button>
            <h2>–°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π</h2>
            <div class="list-tabs">
              <button id="articlesTabBtn" class="ghost small active" type="button" aria-pressed="true">–°—Ç–∞—Ç—å–∏</button>
              <button id="trashTabBtn" class="ghost small" type="button" aria-pressed="false">–ö–æ—Ä–∑–∏–Ω–∞</button>
            </div>
            <div class="list-header-actions">
              <button
                id="listMenuBtn"
                class="ghost icon-button"
                type="button"
                aria-haspopup="true"
                aria-expanded="false"
                aria-controls="list-menu"
                title="–ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç–µ–π"
              >
                &#8942;
              </button>
              <div id="listMenu" class="article-menu hidden" role="menu">
                <button id="importArticleBtn" class="menu-item" type="button" role="menuitem">
                  –ò–º–ø–æ—Ä—Ç –∏–∑ HTML
                </button>
                <button id="importMarkdownBtn" class="menu-item" type="button" role="menuitem">
                  –ò–º–ø–æ—Ä—Ç –∏–∑ Markdown
                </button>
                <button id="importLogseqBtn" class="menu-item" type="button" role="menuitem">
                  –ò–º–ø–æ—Ä—Ç –∏–∑ Logseq
                </button>
              </div>
            </div>
          </div>
          <ul id="articleList"></ul>
        </section>

        <section id="articleView" class="panel hidden">
          <div class="panel-header article-header">
            <div class="title-block">
                <div class="title-row">
                  <button id="mobileSidebarBtn" class="ghost icon-button mobile-only" type="button" title="–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π">‚ò∞</button>
                  <h2 id="articleTitle"></h2>
                  <input id="articleTitleInput" class="hidden" type="text" />
                  <button
                    id="articlePublicLinkBtn"
                    class="ghost icon-button small public-link-button"
                    type="button"
                    title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É"
                    aria-label="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É"
                  >
                    üåê
                  </button>
                  <div class="article-actions">
                    <button
                     id="articleMenuBtn"
                      class="ghost icon-button"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="article-menu"
                    title="–î–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—Ç–∞—Ç—å—ë–π"
                  >
                    &#8942;
                  </button>
                  <div id="articleMenu" class="article-menu hidden" role="menu">
                    <button id="articlePublicToggleBtn" class="menu-item" type="button" role="menuitem">
                      –°–¥–µ–ª–∞—Ç—å –ø—É–±–ª–∏—á–Ω–æ–π
                    </button>
                    <button id="exportArticleBtn" class="menu-item" type="button" role="menuitem">
                      –≠–∫—Å–ø–æ—Ä—Ç –≤ HTML
                    </button>
                    <button id="articleEncryptionBtn" class="menu-item" type="button" role="menuitem">
                      –ó–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å
                    </button>
                    <button id="articleEncryptionRemoveBtn" class="menu-item" type="button" role="menuitem">
                      –°–Ω—è—Ç—å –∑–∞—â–∏—Ç—É
                    </button>
                    <button id="deleteArticleBtn" class="menu-item danger" type="button" role="menuitem">
                      –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ç—å—é
                    </button>
                  </div>
                </div>
              </div>
              <p id="updatedAt" class="meta"></p>
              <div id="articleToolbar" class="article-toolbar">
                <button id="articleUndoBtn" class="ghost small" type="button" title="–û—Ç–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ (Ctrl+Z)">
                  ‚Ü∫<span class="toolbar-label"> –û—Ç–º–µ–Ω–∏—Ç—å</span>
                </button>
                <button id="articleRedoBtn" class="ghost small" type="button" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ (Ctrl+Y)">
                  ‚Üª<span class="toolbar-label"> –ü–æ–≤—Ç–æ—Ä–∏—Ç—å</span>
                </button>
                <button
                  id="dragModeToggleBtn"
                  class="ghost small drag-mode-toggle-btn"
                  type="button"
                  aria-pressed="false"
                  title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è –±–ª–æ–∫–æ–≤"
                >
                  ‚áÖ<span class="toolbar-label"> –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ</span>
                </button>
                <button id="articleNewBlockBtn" class="ghost small" type="button" title="–°–æ–∑–¥–∞—Ç—å –±–ª–æ–∫ –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–≥–æ">
                  –ù–æ–≤—ã–π –±–ª–æ–∫
                </button>
              </div>
            </div>
            <div id="pasteProgress" class="inline-progress hidden" role="status" aria-live="polite">
              <span class="inline-progress__spinner" aria-hidden="true"></span>
              <span class="inline-progress__text">–í—Å—Ç–∞–≤–ª—è–µ–º Markdown...</span>
            </div>
          </div>

          <div id="blocksContainer" class="blocks"></div>
        </section>

        <section id="usersView" class="panel hidden">
          <div class="panel-header">
            <h2>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
            <button id="usersBackBtn" class="ghost small" type="button">–ù–∞–∑–∞–¥</button>
          </div>
          <ul id="usersList" class="users-list"></ul>
        </section>
      </main>
    </div>

    <div id="toast" class="toast hidden"></div>
    <div id="modal-root"></div>
    <div id="sidebarBackdrop" class="sidebar-backdrop hidden"></div>

    <script type="module" src="/app.js"></script>
  </body>
</html>
